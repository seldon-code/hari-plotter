<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>hari_plotter.plot &mdash; Hari Plotter  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Hari Plotter
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples_page.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../source/modules.html">hari_plotter</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Hari Plotter</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Module code</a></li>
      <li class="breadcrumb-item active">hari_plotter.plot</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for hari_plotter.plot</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>

<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABC</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="p">(</span><span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Iterator</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Type</span><span class="p">,</span>
                    <span class="n">Union</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">matplotlib.cm</span> <span class="k">as</span> <span class="nn">cm</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">from</span> <span class="nn">matplotlib.colors</span> <span class="kn">import</span> <span class="n">ListedColormap</span><span class="p">,</span> <span class="n">NoNorm</span>

<span class="kn">from</span> <span class="nn">.cluster</span> <span class="kn">import</span> <span class="n">Clustering</span><span class="p">,</span> <span class="n">ParameterBasedClustering</span>
<span class="kn">from</span> <span class="nn">.color_scheme</span> <span class="kn">import</span> <span class="n">ColorScheme</span>
<span class="kn">from</span> <span class="nn">.interface</span> <span class="kn">import</span> <span class="n">Interface</span>
<span class="kn">from</span> <span class="nn">.parameters</span> <span class="kn">import</span> <span class="p">(</span><span class="n">BoolParameter</span><span class="p">,</span> <span class="n">FloatParameter</span><span class="p">,</span> <span class="n">ListParameter</span><span class="p">,</span>
                         <span class="n">NoneOrFloatParameter</span><span class="p">,</span> <span class="n">NoneRangeParameter</span><span class="p">,</span> <span class="n">Parameter</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">.plotter</span> <span class="kn">import</span> <span class="n">Plotter</span>


<div class="viewcode-block" id="Plot">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.Plot">[docs]</a>
<span class="k">class</span> <span class="nc">Plot</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="p">:</span> <span class="n">ColorScheme</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_x_label</span><span class="p">:</span> <span class="nb">bool</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_y_label</span><span class="p">:</span> <span class="nb">bool</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x_lim</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_y_lim</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span>

<div class="viewcode-block" id="Plot.settings">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.Plot.settings">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">settings</span><span class="p">(</span><span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[]</span></div>


<div class="viewcode-block" id="Plot.from_qt">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.Plot.from_qt">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_qt</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">qt_settings</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">qt_settings</span><span class="p">)</span></div>


    <span class="k">def</span> <span class="nf">_parse_axis_limit_reference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reference_str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parse the axis limit reference string.</span>

<span class="sd">        Args:</span>
<span class="sd">            reference_str (str): The reference string (e.g., &#39;x@1,0&#39;).</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple: A tuple containing the axis (&#39;x&#39; or &#39;y&#39;), row index, and column index.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ref_axis</span><span class="p">,</span> <span class="n">ref_indices</span> <span class="o">=</span> <span class="n">reference_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;@&#39;</span><span class="p">)</span>
        <span class="n">ref_row</span><span class="p">,</span> <span class="n">ref_col</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">ref_indices</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">ref_axis</span><span class="p">,</span> <span class="n">ref_row</span><span class="p">,</span> <span class="n">ref_col</span>

<div class="viewcode-block" id="Plot.plot_dependencies">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.Plot.plot_dependencies">[docs]</a>
    <span class="k">def</span> <span class="nf">plot_dependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dependencies</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;before&#39;</span><span class="p">:</span> <span class="p">[],</span> <span class="s1">&#39;after&#39;</span><span class="p">:</span> <span class="p">[]}</span>

        <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_x_lim</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y_lim</span><span class="p">]:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="c1"># Assuming format is &#39;x(y)@row,col&#39;</span>
                <span class="n">ref_plot</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">value</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)))</span>
                <span class="c1"># Add edge with (row, col) only</span>
                <span class="n">dependencies</span><span class="p">[</span><span class="s1">&#39;after&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ref_plot</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">dependencies</span></div>


<div class="viewcode-block" id="Plot.get_limits">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.Plot.get_limits">[docs]</a>
    <span class="k">def</span> <span class="nf">get_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis_limits</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]]:</span>
        <span class="n">final_limits</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> \
            <span class="nb">max</span><span class="p">(</span><span class="mi">2</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i_lim</span><span class="p">,</span> <span class="n">scale</span><span class="p">,</span> <span class="n">parameter</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">_x_lim</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y_lim</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">,</span> <span class="n">parameters</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">parameter</span> <span class="o">==</span> <span class="s1">&#39;Time&#39;</span><span class="p">:</span>
                <span class="n">final_limits</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">scale</span> <span class="o">==</span> <span class="s1">&#39;Tanh&#39;</span><span class="p">:</span>
                <span class="n">final_limits</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="o">-</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">i_lim</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">final_limits</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i_lim</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">ref_axis</span><span class="p">,</span> <span class="n">ref_row</span><span class="p">,</span> <span class="n">ref_col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_axis_limit_reference</span><span class="p">(</span>
                    <span class="n">i_lim</span><span class="p">)</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">ref_row</span><span class="p">,</span> <span class="n">ref_col</span><span class="p">)</span> <span class="ow">in</span> <span class="n">axis_limits</span><span class="p">:</span>
                    <span class="n">final_limits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="n">axis_limits</span><span class="p">[(</span><span class="n">ref_row</span><span class="p">,</span> <span class="n">ref_col</span><span class="p">)][</span><span class="mi">0</span> <span class="k">if</span> <span class="n">ref_axis</span> <span class="o">==</span> <span class="s1">&#39;x&#39;</span> <span class="k">else</span> <span class="mi">1</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Render order failure&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">final_limits</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i_lim</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">final_limits</span></div>


<div class="viewcode-block" id="Plot.transform_data">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.Plot.transform_data">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">transform_data</span><span class="p">(</span><span class="n">data_list</span><span class="p">,</span> <span class="n">transform_parameter</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;Nodes&#39;</span><span class="p">):</span>
        <span class="c1"># Extract unique transform_parameter&#39;s and sort them</span>
        <span class="n">transform_parameter_values</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">transform_parameter_value</span> <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">data_list</span> <span class="k">for</span> <span class="n">transform_parameter_value</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="n">transform_parameter</span><span class="p">]}</span>
        <span class="n">transform_parameter_values</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">elem</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">transform_parameter_values</span> <span class="k">if</span> <span class="n">elem</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">}</span>
        <span class="n">transform_parameter_values</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">transform_parameter_values</span><span class="p">)</span>
        <span class="n">transform_parameter_value_index</span> <span class="o">=</span> <span class="p">{</span><span class="n">transform_parameter_value</span><span class="p">:</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span>
                                           <span class="n">transform_parameter_value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">transform_parameter_values</span><span class="p">)}</span>

        <span class="c1"># Extract time steps</span>
        <span class="n">time_steps</span> <span class="o">=</span> <span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Time&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">data_list</span><span class="p">]</span>

        <span class="c1"># Initialize parameters dictionary</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">full</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">transform_parameter_values</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">time_steps</span><span class="p">)),</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
                  <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">data_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="n">transform_parameter</span><span class="p">,</span> <span class="s1">&#39;Time&#39;</span><span class="p">,</span> <span class="s1">&#39;Nodes&#39;</span><span class="p">,</span> <span class="s1">&#39;Type&#39;</span><span class="p">]}</span>
        <span class="k">if</span> <span class="s1">&#39;Type&#39;</span> <span class="ow">in</span> <span class="n">data_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;Type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">full</span><span class="p">(</span>
                <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">transform_parameter_values</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">time_steps</span><span class="p">)),</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>

        <span class="c1"># Fill in the parameter values</span>
        <span class="k">for</span> <span class="n">t</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data_list</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">params</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">param</span> <span class="o">!=</span> <span class="s1">&#39;Nodes&#39;</span><span class="p">:</span>
                    <span class="c1"># Map each transform_parameter_value&#39;s value to the corresponding row in the parameter&#39;s array</span>
                    <span class="k">for</span> <span class="n">transform_parameter_value</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">transform_parameter</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="n">param</span><span class="p">]):</span>
                        <span class="k">if</span> <span class="n">transform_parameter_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="n">idx</span> <span class="o">=</span> <span class="n">transform_parameter_value_index</span><span class="p">[</span><span class="n">transform_parameter_value</span><span class="p">]</span>
                            <span class="n">params</span><span class="p">[</span><span class="n">param</span><span class="p">][</span><span class="n">idx</span><span class="p">,</span> <span class="n">t</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;Time&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">time_steps</span><span class="p">),</span>
            <span class="n">transform_parameter</span><span class="p">:</span> <span class="n">transform_parameter_values</span><span class="p">,</span>
            <span class="o">**</span><span class="n">params</span>
        <span class="p">}</span></div>


<div class="viewcode-block" id="Plot.get_static_plot_requests">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.Plot.get_static_plot_requests">[docs]</a>
    <span class="k">def</span> <span class="nf">get_static_plot_requests</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[]</span></div>


<div class="viewcode-block" id="Plot.get_dynamic_plot_requests">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.Plot.get_dynamic_plot_requests">[docs]</a>
    <span class="k">def</span> <span class="nf">get_dynamic_plot_requests</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[]</span></div>


<div class="viewcode-block" id="Plot.get_track_clusterings_requests">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.Plot.get_track_clusterings_requests">[docs]</a>
    <span class="k">def</span> <span class="nf">get_track_clusterings_requests</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
        <span class="k">return</span> <span class="p">[]</span></div>


<div class="viewcode-block" id="Plot.is_available">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.Plot.is_available">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">is_available</span><span class="p">(</span><span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39; Returns True if available for this interface and comment why&#39;&#39;&#39;</span>
        <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;&#39;</span></div>


<div class="viewcode-block" id="Plot.settings_to_code">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.Plot.settings_to_code">[docs]</a>
    <span class="k">def</span> <span class="nf">settings_to_code</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span></div>


<div class="viewcode-block" id="Plot.is_single_color">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.Plot.is_single_color">[docs]</a>
    <span class="k">def</span> <span class="nf">is_single_color</span><span class="p">(</span><span class="n">color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">|</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">))</span> <span class="ow">or</span> <span class="n">color</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="mi">4</span><span class="p">,)</span> <span class="ow">or</span> <span class="n">color</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="mi">3</span><span class="p">,)</span></div>


<div class="viewcode-block" id="Plot.tanh_axis_labels">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.Plot.tanh_axis_labels">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">tanh_axis_labels</span><span class="p">(</span><span class="n">ax</span><span class="p">:</span> <span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">,</span> <span class="n">scale</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adjust axis labels for tanh scaling.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        -----------</span>
<span class="sd">        ax : plt.Axes</span>
<span class="sd">            The Axes object to which the label adjustments should be applied.</span>
<span class="sd">        scale : List[str]</span>
<span class="sd">            Which axis to adjust. Choices: &#39;x&#39;, &#39;y&#39;, or &#39;both&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tickslabels</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mf">2.5</span><span class="p">,</span> <span class="mf">2.6</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">))</span> <span class="o">+</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">]</span>
        <span class="n">ticks</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tanh</span><span class="p">(</span><span class="n">tickslabels</span><span class="p">)</span>

        <span class="n">tickslabels</span> <span class="o">=</span> <span class="p">[</span><span class="sa">r</span><span class="s1">&#39;-$\infty$&#39;</span> <span class="k">if</span> <span class="n">label</span> <span class="o">==</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span> <span class="k">else</span> <span class="sa">r</span><span class="s1">&#39;$\infty$&#39;</span> <span class="k">if</span> <span class="n">label</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span> <span class="k">else</span> <span class="n">label</span> <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span>
            <span class="n">label</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mf">1.5</span> <span class="k">else</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">tickslabels</span><span class="p">]</span>

        <span class="n">minor_tickslabels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mf">2.5</span><span class="p">,</span> <span class="mf">2.6</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
        <span class="n">minor_ticks</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tanh</span><span class="p">(</span><span class="n">minor_tickslabels</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">scale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tanh&#39;</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">ticks</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">tickslabels</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">minor_ticks</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([],</span> <span class="n">minor</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>

        <span class="k">if</span> <span class="n">scale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tanh&#39;</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">ticks</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">(</span><span class="n">tickslabels</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">minor_ticks</span><span class="p">,</span> <span class="n">minor</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">([],</span> <span class="n">minor</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span></div>
</div>



<div class="viewcode-block" id="plot_histogram">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_histogram">[docs]</a>
<span class="nd">@Plotter</span><span class="o">.</span><span class="n">plot_type</span><span class="p">(</span><span class="s2">&quot;Histogram&quot;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">plot_histogram</span><span class="p">(</span><span class="n">Plot</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span><span class="p">,</span> <span class="n">color_scheme</span><span class="p">:</span> <span class="n">ColorScheme</span><span class="p">,</span> <span class="n">parameter</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                 <span class="n">scale</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">rotated</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                 <span class="n">show_x_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">show_y_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                 <span class="n">exclude_types</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(),</span>
                 <span class="n">x_lim</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">y_lim</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">histogram_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span> <span class="o">=</span> <span class="n">interface</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="p">:</span> <span class="n">ColorScheme</span> <span class="o">=</span> <span class="n">color_scheme</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameter</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">parameter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">parameter</span><span class="p">,)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">scale</span> <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;Linear&#39;</span><span class="p">,</span> <span class="s1">&#39;Linear&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exclude_types</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">exclude_types</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rotated</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">rotated</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_x_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">show_x_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_y_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">show_y_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x_lim</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">x_lim</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_y_lim</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">y_lim</span>

        <span class="k">def</span> <span class="nf">histogram_color_to_histogram_color_settings</span><span class="p">(</span><span class="n">histogram_color</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">histogram_color</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="c1"># check if only &#39;mode&#39; and &#39;settings&#39; in dict</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">key</span> <span class="ow">in</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">}</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">histogram_color</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s1">&#39;Histogram color is incorrectly formatted&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">histogram_color</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">histogram_color</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Constant Color&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="n">histogram_color</span><span class="p">}}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Constant Color&#39;</span><span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">histogram_color_settings</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">histogram_color_to_histogram_color_settings</span><span class="p">(</span>
            <span class="n">histogram_color</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">histogram_color_settings</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">method_logger</span><span class="p">[</span><span class="s1">&#39;Distribution Color&#39;</span><span class="p">][</span><span class="s1">&#39;modes&#39;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Histogram color is incorrectly formatted&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="plot_histogram.get_track_clusterings_requests">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_histogram.get_track_clusterings_requests">[docs]</a>
    <span class="k">def</span> <span class="nf">get_track_clusterings_requests</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">requires_tracking</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">histogram_color_settings</span><span class="p">)]</span></div>


<div class="viewcode-block" id="plot_histogram.settings_to_code">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_histogram.settings_to_code">[docs]</a>
    <span class="k">def</span> <span class="nf">settings_to_code</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">parameter</span><span class="se">\&#39;</span><span class="s1">:&#39;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">parameter</span> <span class="o">+</span>
                <span class="s1">&#39;,</span><span class="se">\&#39;</span><span class="s1">scale</span><span class="se">\&#39;</span><span class="s1">:&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span> <span class="o">+</span>
                <span class="s1">&#39;,</span><span class="se">\&#39;</span><span class="s1">rotated</span><span class="se">\&#39;</span><span class="s1">:&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rotated</span><span class="p">)</span> <span class="o">+</span>
                <span class="s1">&#39;,</span><span class="se">\&#39;</span><span class="s1">show_x_label</span><span class="se">\&#39;</span><span class="s1">:&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">show_x_label</span><span class="p">)</span> <span class="o">+</span>
                <span class="s1">&#39;,</span><span class="se">\&#39;</span><span class="s1">show_y_label</span><span class="se">\&#39;</span><span class="s1">:&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">show_y_label</span><span class="p">)</span> <span class="o">+</span>
                <span class="s1">&#39;,</span><span class="se">\&#39;</span><span class="s1">x_lim</span><span class="se">\&#39;</span><span class="s1">:&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_x_lim</span><span class="p">)</span> <span class="o">+</span>
                <span class="s1">&#39;,</span><span class="se">\&#39;</span><span class="s1">y_lim</span><span class="se">\&#39;</span><span class="s1">:&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_y_lim</span><span class="p">)</span> <span class="o">+</span>
                <span class="s1">&#39;,</span><span class="se">\&#39;</span><span class="s1">histogram_color</span><span class="se">\&#39;</span><span class="s1">:&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">histogram_color_settings</span><span class="p">))</span></div>


<div class="viewcode-block" id="plot_histogram.settings">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_histogram.settings">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">settings</span><span class="p">(</span><span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Parameter</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">ListParameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Parameter&#39;</span><span class="p">,</span> <span class="n">parameter_name</span><span class="o">=</span><span class="s1">&#39;parameter&#39;</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="n">interface</span><span class="o">.</span><span class="n">node_parameters</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;Parameter of the histogram&#39;</span><span class="p">),</span>
                <span class="n">ListParameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Scale&#39;</span><span class="p">,</span> <span class="n">parameter_name</span><span class="o">=</span><span class="s1">&#39;scale&#39;</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="p">[</span>
                              <span class="s1">&#39;Linear&#39;</span><span class="p">,</span> <span class="s1">&#39;Tanh&#39;</span><span class="p">],</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;Scale of the parameter&#39;</span><span class="p">),</span>
                <span class="n">BoolParameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Rotate&#39;</span><span class="p">,</span> <span class="n">parameter_name</span><span class="o">=</span><span class="s1">&#39;rotated&#39;</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                              <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;Should the histogram be rotated?&#39;</span><span class="p">),</span>
                <span class="n">BoolParameter</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Show X Label&#39;</span><span class="p">,</span> <span class="n">parameter_name</span><span class="o">=</span><span class="s1">&#39;show_x_label&#39;</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">),</span>
                <span class="n">BoolParameter</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Show Y Label&#39;</span><span class="p">,</span> <span class="n">parameter_name</span><span class="o">=</span><span class="s1">&#39;show_y_label&#39;</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">),</span>
                <span class="n">NoneRangeParameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;X Limit&#39;</span><span class="p">,</span> <span class="n">parameter_name</span><span class="o">=</span><span class="s1">&#39;x_lim&#39;</span><span class="p">,</span>
                                   <span class="n">default_min_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">default_max_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">limits</span><span class="o">=</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">),</span>
                <span class="n">NoneRangeParameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Y Limit&#39;</span><span class="p">,</span> <span class="n">parameter_name</span><span class="o">=</span><span class="s1">&#39;y_lim&#39;</span><span class="p">,</span>
                                   <span class="n">default_min_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">default_max_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">limits</span><span class="o">=</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">),</span>
                <span class="p">]</span></div>


<div class="viewcode-block" id="plot_histogram.qt_to_settings">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_histogram.qt_to_settings">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">qt_to_settings</span><span class="p">(</span><span class="n">qt_settings</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Transforms dict of settings from PyQT GUI to the dict that will be used for class init.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="n">qt_settings</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="c1"># Extract the value of &#39;parameter&#39; and remove it from settings</span>
        <span class="n">parameter_value</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;parameter&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="n">settings</span><span class="p">[</span><span class="s1">&#39;parameter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parameter_value</span>

        <span class="n">settings</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">settings</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">],</span> <span class="s1">&#39;Linear&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">settings</span></div>


<div class="viewcode-block" id="plot_histogram.get_dynamic_plot_requests">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_histogram.get_dynamic_plot_requests">[docs]</a>
    <span class="k">def</span> <span class="nf">get_dynamic_plot_requests</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;calculate_node_values&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;parameters&#39;</span><span class="p">:</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parameter</span><span class="p">,</span> <span class="s1">&#39;Type&#39;</span><span class="p">),</span> <span class="s1">&#39;scale&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">}}]</span></div>


<div class="viewcode-block" id="plot_histogram.plot">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_histogram.plot">[docs]</a>
    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">:</span> <span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">,</span> <span class="n">group_number</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>  <span class="n">axis_limits</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Plot a histogram on the given ax with the provided data data.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        -----------</span>
<span class="sd">        ax : plt.Axes</span>
<span class="sd">            Axes object where the histogram will be plotted.</span>
<span class="sd">        data : list[float]</span>
<span class="sd">            List containing parameter values.</span>
<span class="sd">        scale : str, optional</span>
<span class="sd">            The scale for the x-axis. Options: &#39;Linear&#39; or &#39;Tanh&#39;.</span>
<span class="sd">        rotated : bool, optional</span>
<span class="sd">            If True, the histogram is rotated to be horizontal.</span>
<span class="sd">        x_lim : Optional[Sequence[float] | None]</span>
<span class="sd">            Limits of the x-axis.</span>
<span class="sd">        y_lim : Optional[Sequence[float] | None]</span>
<span class="sd">            Limits of the y-axis.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Histogram expects only one parameter&#39;</span><span class="p">)</span>

        <span class="n">x_lim</span><span class="p">,</span> <span class="n">y_lim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_limits</span><span class="p">(</span><span class="n">axis_limits</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">dynamic_data_cache</span><span class="p">[</span><span class="n">group_number</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">get_dynamic_plot_requests</span><span class="p">()[</span>
            <span class="mi">0</span><span class="p">]]</span>

        <span class="n">nodes</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Nodes&#39;</span><span class="p">]</span>
        <span class="n">types</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Type&#39;</span><span class="p">]</span>
        <span class="n">acceptable_types</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
            <span class="p">[</span><span class="n">t</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">exclude_types</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">types</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parameter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">parameter</span><span class="p">])</span>
        <span class="n">valid_indices</span> <span class="o">=</span> <span class="p">(</span><span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">values</span><span class="p">))</span> <span class="o">&amp;</span> <span class="n">acceptable_types</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="n">valid_indices</span><span class="p">]</span>

        <span class="n">histogram_color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">distribution_color</span><span class="p">(</span>
            <span class="n">nodes</span><span class="o">=</span><span class="n">nodes</span><span class="p">,</span> <span class="n">group_number</span><span class="o">=</span><span class="n">group_number</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">histogram_color_settings</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rotated</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tanh&#39;</span><span class="p">:</span>
                <span class="n">values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tanh</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>

            <span class="n">y_lim</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">nanmin</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="k">if</span> <span class="n">y_lim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">y_lim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmax</span><span class="p">(</span>
                <span class="n">values</span><span class="p">)</span> <span class="k">if</span> <span class="n">y_lim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">y_lim</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>

            <span class="n">values</span> <span class="o">=</span> <span class="n">values</span><span class="p">[(</span><span class="n">values</span> <span class="o">&gt;=</span> <span class="n">y_lim</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">values</span> <span class="o">&lt;=</span> <span class="n">y_lim</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span>

            <span class="n">sns</span><span class="o">.</span><span class="n">kdeplot</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">values</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">histogram_color</span><span class="p">)</span>
            <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">values</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
                         <span class="n">binrange</span><span class="o">=</span><span class="n">y_lim</span><span class="p">,</span> <span class="n">element</span><span class="o">=</span><span class="s2">&quot;step&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">stat</span><span class="o">=</span><span class="s2">&quot;density&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">histogram_color</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_y_label</span><span class="p">:</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">Plotter</span><span class="o">.</span><span class="n">_parameter_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">parameter</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameter</span><span class="p">))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_x_label</span><span class="p">:</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Density&#39;</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tanh&#39;</span><span class="p">:</span>
                <span class="n">values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tanh</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>

            <span class="n">x_lim</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">nanmin</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="k">if</span> <span class="n">x_lim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">x_lim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmax</span><span class="p">(</span>
                <span class="n">values</span><span class="p">)</span> <span class="k">if</span> <span class="n">x_lim</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">x_lim</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>

            <span class="n">values</span> <span class="o">=</span> <span class="n">values</span><span class="p">[(</span><span class="n">values</span> <span class="o">&gt;=</span> <span class="n">x_lim</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">values</span> <span class="o">&lt;=</span> <span class="n">x_lim</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span>

            <span class="n">sns</span><span class="o">.</span><span class="n">kdeplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">values</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">histogram_color</span><span class="p">)</span>
            <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">values</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
                         <span class="n">binrange</span><span class="o">=</span><span class="n">x_lim</span><span class="p">,</span> <span class="n">element</span><span class="o">=</span><span class="s2">&quot;step&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">stat</span><span class="o">=</span><span class="s2">&quot;density&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">histogram_color</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_x_label</span><span class="p">:</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">Plotter</span><span class="o">.</span><span class="n">_parameter_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">parameter</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameter</span><span class="p">))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_y_label</span><span class="p">:</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Density&#39;</span><span class="p">)</span>

        <span class="n">Plot</span><span class="o">.</span><span class="n">tanh_axis_labels</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x_lim</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">*</span><span class="n">x_lim</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">y_lim</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="o">*</span><span class="n">y_lim</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="plot_hexbin">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_hexbin">[docs]</a>
<span class="nd">@Plotter</span><span class="o">.</span><span class="n">plot_type</span><span class="p">(</span><span class="s2">&quot;Hexbin&quot;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">plot_hexbin</span><span class="p">(</span><span class="n">Plot</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span><span class="p">,</span> <span class="n">color_scheme</span><span class="p">:</span> <span class="n">ColorScheme</span><span class="p">,</span> <span class="n">parameters</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
                 <span class="n">scale</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">rotated</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                 <span class="n">show_x_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">show_y_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                 <span class="n">x_lim</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">y_lim</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">colormap</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">show_colorbar</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span> <span class="o">=</span> <span class="n">interface</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span> <span class="o">=</span> <span class="n">color_scheme</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">scale</span> <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;Linear&#39;</span><span class="p">,</span> <span class="s1">&#39;Linear&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rotated</span> <span class="o">=</span> <span class="n">rotated</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_x_label</span> <span class="o">=</span> <span class="n">show_x_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_y_label</span> <span class="o">=</span> <span class="n">show_y_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x_lim</span> <span class="o">=</span> <span class="n">x_lim</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_y_lim</span> <span class="o">=</span> <span class="n">y_lim</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_colorbar</span> <span class="o">=</span> <span class="n">show_colorbar</span>

        <span class="k">def</span> <span class="nf">colormap_to_colormap_settings</span><span class="p">(</span><span class="n">colormap</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">colormap</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="c1"># check if only &#39;mode&#39; and &#39;settings&#39; in dict</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">key</span> <span class="ow">in</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">}</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">colormap</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s1">&#39;Colormap is incorrectly formatted&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">colormap</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">colormap</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Independent Colormap&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;colormap&#39;</span><span class="p">:</span> <span class="n">colormap</span><span class="p">}}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Independent Colormap&#39;</span><span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">colormap_settings</span> <span class="o">=</span> <span class="n">colormap_to_colormap_settings</span><span class="p">(</span><span class="n">colormap</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">colormap_settings</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">method_logger</span><span class="p">[</span><span class="s1">&#39;Color Map&#39;</span><span class="p">][</span><span class="s1">&#39;modes&#39;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Colormap is incorrectly formatted: Mode </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">colormap_settings</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> not in known modes </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">method_logger</span><span class="p">[</span><span class="s1">&#39;Color Map&#39;</span><span class="p">][</span><span class="s1">&#39;modes&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="plot_hexbin.get_track_clusterings_requests">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_hexbin.get_track_clusterings_requests">[docs]</a>
    <span class="k">def</span> <span class="nf">get_track_clusterings_requests</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">requires_tracking</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colormap_settings</span><span class="p">)]</span></div>


<div class="viewcode-block" id="plot_hexbin.settings_to_code">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_hexbin.settings_to_code">[docs]</a>
    <span class="k">def</span> <span class="nf">settings_to_code</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">parameters</span><span class="se">\&#39;</span><span class="s1">:&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span> <span class="o">+</span>
                <span class="s1">&#39;,</span><span class="se">\&#39;</span><span class="s1">scale</span><span class="se">\&#39;</span><span class="s1">:&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span> <span class="o">+</span>
                <span class="s1">&#39;,</span><span class="se">\&#39;</span><span class="s1">rotated</span><span class="se">\&#39;</span><span class="s1">:&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rotated</span><span class="p">)</span> <span class="o">+</span>
                <span class="s1">&#39;,</span><span class="se">\&#39;</span><span class="s1">show_x_label</span><span class="se">\&#39;</span><span class="s1">:&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">show_x_label</span><span class="p">)</span> <span class="o">+</span>
                <span class="s1">&#39;,</span><span class="se">\&#39;</span><span class="s1">show_y_label</span><span class="se">\&#39;</span><span class="s1">:&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">show_y_label</span><span class="p">)</span> <span class="o">+</span>
                <span class="s1">&#39;,</span><span class="se">\&#39;</span><span class="s1">x_lim</span><span class="se">\&#39;</span><span class="s1">:&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_x_lim</span><span class="p">)</span> <span class="o">+</span>
                <span class="s1">&#39;,</span><span class="se">\&#39;</span><span class="s1">y_lim</span><span class="se">\&#39;</span><span class="s1">:&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_y_lim</span><span class="p">)</span> <span class="o">+</span>
                <span class="s1">&#39;,</span><span class="se">\&#39;</span><span class="s1">show_colorbar</span><span class="se">\&#39;</span><span class="s1">:&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">show_colorbar</span><span class="p">))</span></div>


<div class="viewcode-block" id="plot_hexbin.settings">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_hexbin.settings">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">settings</span><span class="p">(</span><span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Parameter</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">ListParameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;X parameter&#39;</span><span class="p">,</span> <span class="n">parameter_name</span><span class="o">=</span><span class="s1">&#39;x_parameter&#39;</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="n">interface</span><span class="o">.</span><span class="n">node_parameters</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">),</span>
                <span class="n">ListParameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;X scale&#39;</span><span class="p">,</span> <span class="n">parameter_name</span><span class="o">=</span><span class="s1">&#39;x_scale&#39;</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="p">[</span>
                              <span class="s1">&#39;Linear&#39;</span><span class="p">,</span> <span class="s1">&#39;Tanh&#39;</span><span class="p">],</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">),</span>
                <span class="n">ListParameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Y parameter&#39;</span><span class="p">,</span> <span class="n">parameter_name</span><span class="o">=</span><span class="s1">&#39;y_parameter&#39;</span><span class="p">,</span>
                              <span class="n">arguments</span><span class="o">=</span><span class="n">interface</span><span class="o">.</span><span class="n">node_parameters</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">),</span>
                <span class="n">ListParameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Y scale&#39;</span><span class="p">,</span> <span class="n">parameter_name</span><span class="o">=</span><span class="s1">&#39;y_scale&#39;</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="p">[</span>
                              <span class="s1">&#39;Linear&#39;</span><span class="p">,</span> <span class="s1">&#39;Tanh&#39;</span><span class="p">],</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">),</span>
                <span class="n">BoolParameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Rotate&#39;</span><span class="p">,</span> <span class="n">parameter_name</span><span class="o">=</span><span class="s1">&#39;rotated&#39;</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                              <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;Should the plot be rotated?&#39;</span><span class="p">),</span>
                <span class="n">BoolParameter</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Show X Label&#39;</span><span class="p">,</span> <span class="n">parameter_name</span><span class="o">=</span><span class="s1">&#39;show_x_label&#39;</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">),</span>
                <span class="n">BoolParameter</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Show Y Label&#39;</span><span class="p">,</span> <span class="n">parameter_name</span><span class="o">=</span><span class="s1">&#39;show_y_label&#39;</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">),</span>
                <span class="n">NoneRangeParameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;X Limit&#39;</span><span class="p">,</span> <span class="n">parameter_name</span><span class="o">=</span><span class="s1">&#39;x_lim&#39;</span><span class="p">,</span>
                                   <span class="n">default_min_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">default_max_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">limits</span><span class="o">=</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">),</span>
                <span class="n">NoneRangeParameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Y Limit&#39;</span><span class="p">,</span> <span class="n">parameter_name</span><span class="o">=</span><span class="s1">&#39;y_lim&#39;</span><span class="p">,</span>
                                   <span class="n">default_min_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">default_max_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">limits</span><span class="o">=</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">),</span>
                <span class="n">BoolParameter</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Show Colorbar&#39;</span><span class="p">,</span> <span class="n">parameter_name</span><span class="o">=</span><span class="s1">&#39;show_colorbar&#39;</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">),</span>
                <span class="p">]</span></div>


<div class="viewcode-block" id="plot_hexbin.qt_to_settings">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_hexbin.qt_to_settings">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">qt_to_settings</span><span class="p">(</span><span class="n">qt_settings</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="c1"># Copy qt_settings to avoid modifying the original dictionary</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="n">qt_settings</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="c1"># Extract the value of &#39;parameter&#39; and remove it from settings</span>
        <span class="n">x_parameter_value</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;x_parameter&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">y_parameter_value</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;y_parameter&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="n">x_scale</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;x_scale&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">y_scale</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;y_scale&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="n">settings</span><span class="p">[</span><span class="s1">&#39;parameters&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">x_parameter_value</span><span class="p">,</span> <span class="n">y_parameter_value</span><span class="p">)</span>

        <span class="n">settings</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">x_scale</span><span class="p">,</span> <span class="n">y_scale</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">settings</span></div>


<div class="viewcode-block" id="plot_hexbin.get_dynamic_plot_requests">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_hexbin.get_dynamic_plot_requests">[docs]</a>
    <span class="k">def</span> <span class="nf">get_dynamic_plot_requests</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;calculate_node_values&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;parameters&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">,</span> <span class="s1">&#39;scale&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">}}]</span></div>


<div class="viewcode-block" id="plot_hexbin.plot">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_hexbin.plot">[docs]</a>
    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">:</span> <span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">,</span> <span class="n">group_number</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>  <span class="n">axis_limits</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Plot a hexbin on the given ax with the provided x and y values.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        -----------</span>
<span class="sd">        ax : plt.Axes</span>
<span class="sd">            Axes object where the hexbin will be plotted.</span>
<span class="sd">        x_values, y_values : list[float]</span>
<span class="sd">            Lists containing x-values and y-values</span>
<span class="sd">        extent : list[float], optional</span>
<span class="sd">            The bounding box in data coordinates that the hexbin should fill.</span>
<span class="sd">        colormap : str, optional</span>
<span class="sd">            The colormap to be used for hexbin coloring.</span>
<span class="sd">        cmax : float, optional</span>
<span class="sd">            The maximum number of counts in a hexbin for colormap scaling.</span>
<span class="sd">        scale : list, optional</span>
<span class="sd">            Scale for the plot values (x and y). Options: &#39;Linear&#39; or &#39;Tanh&#39;. Default is &#39;Linear&#39; for both.</span>
<span class="sd">        show_colorbar : bool, optional</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">x_lim</span><span class="p">,</span> <span class="n">y_lim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_limits</span><span class="p">(</span><span class="n">axis_limits</span><span class="p">)</span>

        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">dynamic_data_cache</span><span class="p">[</span><span class="n">group_number</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">get_dynamic_plot_requests</span><span class="p">()[</span>
            <span class="mi">0</span><span class="p">]]</span>

        <span class="n">x_parameter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">y_parameter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">x_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">x_parameter</span><span class="p">])</span>
        <span class="n">y_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">y_parameter</span><span class="p">])</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Nodes&#39;</span><span class="p">]</span>
        <span class="n">colormap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span>
            <span class="n">nodes</span><span class="o">=</span><span class="n">nodes</span><span class="p">,</span> <span class="n">group_number</span><span class="o">=</span><span class="n">group_number</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">colormap_settings</span><span class="p">)</span>

        <span class="c1"># Find indices where neither x_values nor y_values are NaN</span>
        <span class="n">valid_indices</span> <span class="o">=</span> <span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">x_values</span><span class="p">)</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">y_values</span><span class="p">)</span>

        <span class="c1"># Filter the values using these indices</span>
        <span class="n">x_values</span> <span class="o">=</span> <span class="n">x_values</span><span class="p">[</span><span class="n">valid_indices</span><span class="p">]</span>
        <span class="n">y_values</span> <span class="o">=</span> <span class="n">y_values</span><span class="p">[</span><span class="n">valid_indices</span><span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tanh&#39;</span><span class="p">:</span>
            <span class="n">x_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tanh</span><span class="p">(</span><span class="n">x_values</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tanh&#39;</span><span class="p">:</span>
            <span class="n">y_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tanh</span><span class="p">(</span><span class="n">y_values</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">x_lim</span> <span class="o">==</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">x_lim</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tanh&#39;</span> <span class="k">else</span> <span class="p">[</span>
                <span class="n">np</span><span class="o">.</span><span class="n">nanmin</span><span class="p">(</span><span class="n">x_values</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmax</span><span class="p">(</span><span class="n">x_values</span><span class="p">)]</span>
        <span class="k">if</span> <span class="n">y_lim</span> <span class="o">==</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">y_lim</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tanh&#39;</span> <span class="k">else</span> <span class="p">[</span>
                <span class="n">np</span><span class="o">.</span><span class="n">nanmin</span><span class="p">(</span><span class="n">y_values</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmax</span><span class="p">(</span><span class="n">y_values</span><span class="p">)]</span>

        <span class="n">extent</span> <span class="o">=</span> <span class="n">x_lim</span><span class="o">+</span><span class="n">y_lim</span>

        <span class="n">delta_x</span> <span class="o">=</span> <span class="mf">0.1</span><span class="o">*</span><span class="p">(</span><span class="n">extent</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">extent</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">x_field_extent</span> <span class="o">=</span> <span class="p">[</span><span class="n">extent</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">delta_x</span><span class="p">,</span> <span class="n">extent</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="n">delta_x</span><span class="p">]</span>

        <span class="n">delta_y</span> <span class="o">=</span> <span class="mf">0.1</span><span class="o">*</span><span class="p">(</span><span class="n">extent</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">-</span><span class="n">extent</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="n">y_field_extent</span> <span class="o">=</span> <span class="p">[</span><span class="n">extent</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">-</span><span class="n">delta_y</span><span class="p">,</span> <span class="n">extent</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">+</span><span class="n">delta_y</span><span class="p">]</span>

        <span class="n">field_extent</span> <span class="o">=</span> <span class="n">x_field_extent</span> <span class="o">+</span> <span class="n">y_field_extent</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span> <span class="n">cmap</span><span class="o">=</span><span class="n">colormap</span><span class="p">,</span>
                  <span class="n">interpolation</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="n">field_extent</span><span class="p">)</span>

        <span class="n">hb</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">hexbin</span><span class="p">(</span><span class="n">x_values</span><span class="p">,</span> <span class="n">y_values</span><span class="p">,</span> <span class="n">gridsize</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
                       <span class="n">bins</span><span class="o">=</span><span class="s1">&#39;log&#39;</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="n">extent</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">colormap</span><span class="p">)</span>

        <span class="c1"># Create a background filled with the `0` value of the colormap</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span> <span class="n">cmap</span><span class="o">=</span><span class="n">colormap</span><span class="p">,</span>
                  <span class="n">interpolation</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="n">extent</span><span class="p">)</span>
        <span class="c1"># Create the hexbin plot</span>

        <span class="n">hb</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">hexbin</span><span class="p">(</span><span class="n">x_values</span><span class="p">,</span> <span class="n">y_values</span><span class="p">,</span> <span class="n">gridsize</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">colormap</span><span class="p">,</span>
                       <span class="n">bins</span><span class="o">=</span><span class="s1">&#39;log&#39;</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="n">extent</span><span class="p">)</span>

        <span class="n">Plot</span><span class="o">.</span><span class="n">tanh_axis_labels</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">x_lim</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">*</span><span class="n">x_lim</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">y_lim</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="o">*</span><span class="n">y_lim</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_colorbar</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">hb</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_x_label</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">Plotter</span><span class="o">.</span><span class="n">_parameter_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_y_label</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">Plotter</span><span class="o">.</span><span class="n">_parameter_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span></div>
</div>



<div class="viewcode-block" id="plot_scatter">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_scatter">[docs]</a>
<span class="nd">@Plotter</span><span class="o">.</span><span class="n">plot_type</span><span class="p">(</span><span class="s2">&quot;Scatter&quot;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">plot_scatter</span><span class="p">(</span><span class="n">Plot</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span><span class="p">,</span> <span class="n">color_scheme</span><span class="p">:</span> <span class="n">ColorScheme</span><span class="p">,</span> <span class="n">parameters</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
                 <span class="n">scale</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">rotated</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                 <span class="n">show_x_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">show_y_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                 <span class="n">x_lim</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">y_lim</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">color</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">marker</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span> <span class="o">=</span> <span class="n">interface</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">scale</span> <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;Linear&#39;</span><span class="p">,</span> <span class="s1">&#39;Linear&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rotated</span> <span class="o">=</span> <span class="n">rotated</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_x_label</span> <span class="o">=</span> <span class="n">show_x_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_y_label</span> <span class="o">=</span> <span class="n">show_y_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x_lim</span> <span class="o">=</span> <span class="n">x_lim</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_y_lim</span> <span class="o">=</span> <span class="n">y_lim</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span> <span class="o">=</span> <span class="n">color_scheme</span>

        <span class="k">def</span> <span class="nf">scatter_color_to_scatter_color_settings</span><span class="p">(</span><span class="n">scatter_color</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">scatter_color</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="c1"># check if only &#39;mode&#39; and &#39;settings&#39; in dict</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">key</span> <span class="ow">in</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">}</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">scatter_color</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s1">&#39;Scatter color is incorrectly formatted&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">scatter_color</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">scatter_color</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Constant Color&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="n">scatter_color</span><span class="p">}}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Constant Color&#39;</span><span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">scatter_color_settings</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">scatter_color_to_scatter_color_settings</span><span class="p">(</span>
            <span class="n">color</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scatter_color_settings</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">method_logger</span><span class="p">[</span><span class="s1">&#39;Scatter Color&#39;</span><span class="p">][</span><span class="s1">&#39;modes&#39;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Scatter color is incorrectly formatted: Mode </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">scatter_color_settings</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> not in known modes </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">method_logger</span><span class="p">[</span><span class="s1">&#39;Scatter Color&#39;</span><span class="p">][</span><span class="s1">&#39;modes&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">scatter_marker_to_scatter_marker_settings</span><span class="p">(</span><span class="n">scatter_marker</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">scatter_marker</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="c1"># check if only &#39;mode&#39; and &#39;settings&#39; in dict</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">key</span> <span class="ow">in</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">}</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">scatter_marker</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s1">&#39;Scatter marker is incorrectly formatted&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">scatter_marker</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">scatter_marker</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Constant Marker&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;marker&#39;</span><span class="p">:</span> <span class="n">scatter_marker</span><span class="p">}}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Constant Marker&#39;</span><span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">scatter_marker_settings</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">scatter_marker_to_scatter_marker_settings</span><span class="p">(</span>
            <span class="n">marker</span><span class="p">)</span>

<div class="viewcode-block" id="plot_scatter.get_track_clusterings_requests">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_scatter.get_track_clusterings_requests">[docs]</a>
    <span class="k">def</span> <span class="nf">get_track_clusterings_requests</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">requires_tracking</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scatter_color_settings</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">requires_tracking</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scatter_marker_settings</span><span class="p">)]</span></div>


<div class="viewcode-block" id="plot_scatter.get_dynamic_plot_requests">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_scatter.get_dynamic_plot_requests">[docs]</a>
    <span class="k">def</span> <span class="nf">get_dynamic_plot_requests</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;calculate_node_values&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;parameters&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">,</span> <span class="s1">&#39;scale&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">}}]</span></div>


<div class="viewcode-block" id="plot_scatter.plot">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_scatter.plot">[docs]</a>
    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">:</span> <span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">,</span> <span class="n">group_number</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>  <span class="n">axis_limits</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Plot a scatter plot on the given ax with the provided x and y values.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        -----------</span>
<span class="sd">        ax : plt.Axes</span>
<span class="sd">            Axes object where the scatter plot will be plotted.</span>
<span class="sd">        data : defaultdict[List[float]]</span>
<span class="sd">            A dictionary containing lists of x and y values.</span>
<span class="sd">        parameters : tuple[str]</span>
<span class="sd">            A tuple containing the names of the parameters to be plotted.</span>
<span class="sd">        x_lim, y_lim : Optional[Sequence[float]]</span>
<span class="sd">            The limits for the x and y axes.</span>
<span class="sd">        color : Optional[str]</span>
<span class="sd">            The color of the markers.</span>
<span class="sd">        marker : str</span>
<span class="sd">            The shape of the marker.</span>
<span class="sd">        show_x_label, show_y_label : bool</span>
<span class="sd">            Flags to show or hide the x and y labels.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">x_lim</span><span class="p">,</span> <span class="n">y_lim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_limits</span><span class="p">(</span><span class="n">axis_limits</span><span class="p">)</span>

        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">dynamic_data_cache</span><span class="p">[</span><span class="n">group_number</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">get_dynamic_plot_requests</span><span class="p">()[</span>
            <span class="mi">0</span><span class="p">]]</span>

        <span class="n">x_parameter</span><span class="p">,</span> <span class="n">y_parameter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span>
        <span class="n">x_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">x_parameter</span><span class="p">])</span>
        <span class="n">y_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">y_parameter</span><span class="p">])</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Nodes&#39;</span><span class="p">]</span>

        <span class="c1"># Remove NaN values</span>
        <span class="n">valid_indices</span> <span class="o">=</span> <span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">x_values</span><span class="p">)</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">y_values</span><span class="p">)</span>
        <span class="n">x_values</span> <span class="o">=</span> <span class="n">x_values</span><span class="p">[</span><span class="n">valid_indices</span><span class="p">]</span>
        <span class="n">y_values</span> <span class="o">=</span> <span class="n">y_values</span><span class="p">[</span><span class="n">valid_indices</span><span class="p">]</span>
        <span class="n">valid_nodes</span> <span class="o">=</span> <span class="p">[</span><span class="n">nodes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">valid_indices</span><span class="p">)[</span><span class="mi">0</span><span class="p">]]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tanh&#39;</span><span class="p">:</span>
            <span class="n">x_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tanh</span><span class="p">(</span><span class="n">x_values</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tanh&#39;</span><span class="p">:</span>
            <span class="n">y_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tanh</span><span class="p">(</span><span class="n">y_values</span><span class="p">)</span>

        <span class="n">colors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">scatter_colors_nodes</span><span class="p">(</span>
            <span class="n">nodes</span><span class="o">=</span><span class="n">valid_nodes</span><span class="p">,</span> <span class="n">group_number</span><span class="o">=</span><span class="n">group_number</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">scatter_color_settings</span><span class="p">)</span>
        <span class="n">markers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">scatter_markers_nodes</span><span class="p">(</span>
            <span class="n">nodes</span><span class="o">=</span><span class="n">valid_nodes</span><span class="p">,</span> <span class="n">group_number</span><span class="o">=</span><span class="n">group_number</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">scatter_marker_settings</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">markers</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">))):</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x_values</span><span class="p">,</span> <span class="n">y_values</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="n">markers</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Convert markers to a NumPy array for efficient processing</span>
            <span class="n">markers</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">markers</span><span class="p">)</span>
            <span class="n">unique_markers</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">markers</span><span class="p">)</span>
            <span class="n">colors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">colors</span><span class="p">)</span>
            <span class="n">colors_is_array</span> <span class="o">=</span> <span class="ow">not</span> <span class="p">(</span><span class="n">Plot</span><span class="o">.</span><span class="n">is_single_color</span><span class="p">(</span><span class="n">colors</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">colors_is_array</span><span class="p">:</span>
                <span class="c1"># Ensure colors is a NumPy array of individual colors for each point</span>
                <span class="n">colors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">colors</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Single color definition, use it directly for all points</span>
                <span class="n">c</span> <span class="o">=</span> <span class="n">colors</span>

            <span class="c1"># Plot each group of points with the same marker individually</span>
            <span class="k">for</span> <span class="n">marker</span> <span class="ow">in</span> <span class="n">unique_markers</span><span class="p">:</span>
                <span class="c1"># Find indices of points with the current marker</span>
                <span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">markers</span> <span class="o">==</span> <span class="n">marker</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

                <span class="k">if</span> <span class="n">colors_is_array</span><span class="p">:</span>
                    <span class="c1"># Extract the colors for the selected indices for individual colors per point</span>
                    <span class="n">c</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="n">indices</span><span class="p">,</span> <span class="p">:]</span>

                <span class="c1"># Plot these points as a separate scatter plot</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x_values</span><span class="p">[</span><span class="n">indices</span><span class="p">],</span>
                           <span class="n">y_values</span><span class="p">[</span><span class="n">indices</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="n">marker</span><span class="p">)</span>

        <span class="c1"># Setting the plot limits</span>
        <span class="k">if</span> <span class="n">x_lim</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">*</span><span class="n">x_lim</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">y_lim</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="o">*</span><span class="n">y_lim</span><span class="p">)</span>

        <span class="n">Plot</span><span class="o">.</span><span class="n">tanh_axis_labels</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_x_label</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">Plotter</span><span class="o">.</span><span class="n">_parameter_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="n">x_parameter</span><span class="p">,</span> <span class="n">x_parameter</span><span class="p">))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_y_label</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">Plotter</span><span class="o">.</span><span class="n">_parameter_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="n">y_parameter</span><span class="p">,</span> <span class="n">y_parameter</span><span class="p">))</span></div>
</div>



<div class="viewcode-block" id="plot_clustering_centroids">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_clustering_centroids">[docs]</a>
<span class="nd">@Plotter</span><span class="o">.</span><span class="n">plot_type</span><span class="p">(</span><span class="s2">&quot;Clustering: Centroids&quot;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">plot_clustering_centroids</span><span class="p">(</span><span class="n">Plot</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span><span class="p">,</span> <span class="n">color_scheme</span><span class="p">:</span> <span class="n">ColorScheme</span><span class="p">,</span> <span class="n">parameters</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">clustering_settings</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
                 <span class="n">scale</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">rotated</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                 <span class="n">show_x_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">show_y_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                 <span class="n">x_lim</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">y_lim</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">color</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">marker</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span> <span class="o">=</span> <span class="n">interface</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clustering_settings</span> <span class="o">=</span> <span class="n">clustering_settings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">scale</span> <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;Linear&#39;</span><span class="p">,</span> <span class="s1">&#39;Linear&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rotated</span> <span class="o">=</span> <span class="n">rotated</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_x_label</span> <span class="o">=</span> <span class="n">show_x_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_y_label</span> <span class="o">=</span> <span class="n">show_y_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x_lim</span> <span class="o">=</span> <span class="n">x_lim</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_y_lim</span> <span class="o">=</span> <span class="n">y_lim</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span> <span class="o">=</span> <span class="n">color_scheme</span>

        <span class="k">def</span> <span class="nf">centroid_color_to_centroid_color_settings</span><span class="p">(</span><span class="n">centroid_color</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">centroid_color</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="c1"># check if only &#39;mode&#39; and &#39;settings&#39; in dict</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">key</span> <span class="ow">in</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">}</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">centroid_color</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s1">&#39;Centroid color is incorrectly formatted&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">centroid_color</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">centroid_color</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Constant Color&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="n">centroid_color</span><span class="p">}}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Constant Color&#39;</span><span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">centroid_color_settings</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">centroid_color_to_centroid_color_settings</span><span class="p">(</span>
            <span class="n">color</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">centroid_color_settings</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">method_logger</span><span class="p">[</span><span class="s1">&#39;Scatter Color&#39;</span><span class="p">][</span><span class="s1">&#39;modes&#39;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Centroid color is incorrectly formatted: Mode </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">centroid_color_settings</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> not in known modes </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">method_logger</span><span class="p">[</span><span class="s1">&#39;Centroid Color&#39;</span><span class="p">][</span><span class="s1">&#39;modes&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">centroid_marker_to_centroid_marker_settings</span><span class="p">(</span><span class="n">centroid_marker</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">centroid_marker</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="c1"># check if only &#39;mode&#39; and &#39;settings&#39; in dict</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">key</span> <span class="ow">in</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">}</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">centroid_marker</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s1">&#39;Centroid marker is incorrectly formatted&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">centroid_marker</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">centroid_marker</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Constant Marker&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;marker&#39;</span><span class="p">:</span> <span class="n">centroid_marker</span><span class="p">}}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Constant Marker&#39;</span><span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">centroid_marker_settings</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">centroid_marker_to_centroid_marker_settings</span><span class="p">(</span>
            <span class="n">marker</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">centroid_marker_settings</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">method_logger</span><span class="p">[</span><span class="s1">&#39;Centroid Marker&#39;</span><span class="p">][</span><span class="s1">&#39;modes&#39;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Centroid marker is incorrectly formatted: Mode </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">centroid_marker_settings</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> not in known modes </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">method_logger</span><span class="p">[</span><span class="s1">&#39;Centroid Marker&#39;</span><span class="p">][</span><span class="s1">&#39;modes&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="plot_clustering_centroids.get_track_clusterings_requests">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_clustering_centroids.get_track_clusterings_requests">[docs]</a>
    <span class="k">def</span> <span class="nf">get_track_clusterings_requests</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">requires_tracking</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">centroid_color_settings</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">requires_tracking</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">centroid_marker_settings</span><span class="p">)]</span></div>


<div class="viewcode-block" id="plot_clustering_centroids.get_dynamic_plot_requests">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_clustering_centroids.get_dynamic_plot_requests">[docs]</a>
    <span class="k">def</span> <span class="nf">get_dynamic_plot_requests</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;get_clustering&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;parameters&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">,</span> <span class="s1">&#39;scale&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">,</span> <span class="s1">&#39;clustering_settings&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">clustering_settings</span><span class="p">}}]</span></div>


<div class="viewcode-block" id="plot_clustering_centroids.plot">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_clustering_centroids.plot">[docs]</a>
    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">:</span> <span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">,</span> <span class="n">group_number</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>  <span class="n">axis_limits</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Plots the decision boundaries for a 2D slice of the clustering object&#39;s data.</span>

<span class="sd">        Args:</span>
<span class="sd">        - x_feature_index (int): The index of the feature to be plotted on the x-axis.</span>
<span class="sd">        - y_feature_index (int): The index of the feature to be plotted on the y-axis.</span>
<span class="sd">        - plot_limits (tuple): A tuple containing the limits of the plot: (x_min, x_max, y_min, y_max).</span>
<span class="sd">        - resolution (int): The number of points to generate in the mesh for the plot.</span>

<span class="sd">        Returns:</span>
<span class="sd">        None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">x_lim</span><span class="p">,</span> <span class="n">y_lim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_limits</span><span class="p">(</span><span class="n">axis_limits</span><span class="p">)</span>
        <span class="n">clustering</span><span class="p">:</span> <span class="n">ParameterBasedClustering</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">dynamic_data_cache</span><span class="p">[</span><span class="n">group_number</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">get_dynamic_plot_requests</span><span class="p">()[</span>
            <span class="mi">0</span><span class="p">]]</span>

        <span class="n">x_feature_name</span><span class="p">,</span> <span class="n">y_feature_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span>

        <span class="n">x_feature_index</span><span class="p">,</span> <span class="n">y_feature_index</span> <span class="o">=</span> <span class="n">clustering</span><span class="o">.</span><span class="n">get_indices_from_parameters</span><span class="p">(</span>
            <span class="p">[</span><span class="n">x_feature_name</span><span class="p">,</span> <span class="n">y_feature_name</span><span class="p">])</span>

        <span class="c1"># Plot centroids if they are 2D</span>
        <span class="n">centroids</span> <span class="o">=</span> <span class="n">clustering</span><span class="o">.</span><span class="n">centroids</span><span class="p">()</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="n">clustering</span><span class="o">.</span><span class="n">cluster_labels</span>

        <span class="n">markers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">centroid_markers</span><span class="p">(</span>
            <span class="n">clusters</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span> <span class="n">group_number</span><span class="o">=</span><span class="n">group_number</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">centroid_marker_settings</span><span class="p">)</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">centroid_colors</span><span class="p">(</span>
            <span class="n">clusters</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span> <span class="n">group_number</span><span class="o">=</span><span class="n">group_number</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">centroid_color_settings</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">centroids</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Centroids (</span><span class="si">{</span><span class="n">centroids</span><span class="si">}</span><span class="s2">) shape is incorrect&quot;</span><span class="p">)</span>

        <span class="n">x_values</span> <span class="o">=</span> <span class="n">centroids</span><span class="p">[:,</span> <span class="n">x_feature_index</span><span class="p">]</span>
        <span class="n">y_values</span> <span class="o">=</span> <span class="n">centroids</span><span class="p">[:,</span> <span class="n">y_feature_index</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tanh&#39;</span><span class="p">:</span>
            <span class="n">x_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tanh</span><span class="p">(</span><span class="n">x_values</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tanh&#39;</span><span class="p">:</span>
            <span class="n">y_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tanh</span><span class="p">(</span><span class="n">y_values</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">markers</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">))):</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x_values</span><span class="p">,</span> <span class="n">y_values</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="n">markers</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Convert markers to a NumPy array for efficient processing</span>
            <span class="n">markers</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">markers</span><span class="p">)</span>
            <span class="n">unique_markers</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">markers</span><span class="p">)</span>

            <span class="c1"># Check the type of colors to handle single color definitions</span>
            <span class="n">colors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">colors</span><span class="p">)</span>
            <span class="n">colors_is_array</span> <span class="o">=</span> <span class="ow">not</span> <span class="p">(</span><span class="n">Plot</span><span class="o">.</span><span class="n">is_single_color</span><span class="p">(</span><span class="n">colors</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">colors_is_array</span><span class="p">:</span>
                <span class="c1"># Ensure colors is a NumPy array of individual colors for each point</span>
                <span class="n">colors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">colors</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Single color definition, use it directly for all points</span>
                <span class="n">c</span> <span class="o">=</span> <span class="n">colors</span>

            <span class="c1"># Plot each group of points with the same marker individually</span>
            <span class="k">for</span> <span class="n">marker</span> <span class="ow">in</span> <span class="n">unique_markers</span><span class="p">:</span>
                <span class="c1"># Find indices of points with the current marker</span>
                <span class="n">indices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">markers</span> <span class="o">==</span> <span class="n">marker</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

                <span class="k">if</span> <span class="n">colors_is_array</span><span class="p">:</span>
                    <span class="c1"># Extract the colors for the selected indices for individual colors per point</span>
                    <span class="n">c</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="n">indices</span><span class="p">,</span> <span class="p">:]</span>

                <span class="c1"># Plot these points as a separate scatter plot</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x_values</span><span class="p">[</span><span class="n">indices</span><span class="p">],</span>
                           <span class="n">y_values</span><span class="p">[</span><span class="n">indices</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="n">marker</span><span class="p">)</span>

        <span class="c1"># Setting the plot limits</span>
        <span class="k">if</span> <span class="n">x_lim</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">*</span><span class="n">x_lim</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">y_lim</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="o">*</span><span class="n">y_lim</span><span class="p">)</span>

        <span class="n">Plot</span><span class="o">.</span><span class="n">tanh_axis_labels</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_x_label</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">Plotter</span><span class="o">.</span><span class="n">_parameter_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_y_label</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">Plotter</span><span class="o">.</span><span class="n">_parameter_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span></div>
</div>



<div class="viewcode-block" id="plot_clustering_fill">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_clustering_fill">[docs]</a>
<span class="nd">@Plotter</span><span class="o">.</span><span class="n">plot_type</span><span class="p">(</span><span class="s2">&quot;Clustering: Fill&quot;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">plot_clustering_fill</span><span class="p">(</span><span class="n">Plot</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span><span class="p">,</span> <span class="n">color_scheme</span><span class="p">:</span> <span class="n">ColorScheme</span><span class="p">,</span> <span class="n">parameters</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">clustering_settings</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
                 <span class="n">scale</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">show_x_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">show_y_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                 <span class="n">x_lim</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">y_lim</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">fill_color</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">alpha</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span> <span class="n">resolution</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span> <span class="o">=</span> <span class="n">interface</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span> <span class="o">=</span> <span class="n">color_scheme</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clustering_settings</span> <span class="o">=</span> <span class="n">clustering_settings</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">scale</span> <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;Linear&#39;</span><span class="p">,</span> <span class="s1">&#39;Linear&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_x_label</span> <span class="o">=</span> <span class="n">show_x_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_y_label</span> <span class="o">=</span> <span class="n">show_y_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x_lim</span> <span class="o">=</span> <span class="n">x_lim</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_y_lim</span> <span class="o">=</span> <span class="n">y_lim</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span> <span class="o">=</span> <span class="n">resolution</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="n">alpha</span>

        <span class="k">def</span> <span class="nf">fill_color_to_fill_color_settings</span><span class="p">(</span><span class="n">fill_color</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fill_color</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="c1"># check if only &#39;mode&#39; and &#39;settings&#39; in dict</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">key</span> <span class="ow">in</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">}</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">fill_color</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s1">&#39;Histogram color is incorrectly formatted&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">fill_color</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Cluster Color&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;clustering_settings&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">clustering_settings</span><span class="p">}}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fill_color_settings</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">fill_color_to_fill_color_settings</span><span class="p">(</span>
            <span class="n">fill_color</span><span class="p">)</span>

<div class="viewcode-block" id="plot_clustering_fill.get_track_clusterings_requests">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_clustering_fill.get_track_clusterings_requests">[docs]</a>
    <span class="k">def</span> <span class="nf">get_track_clusterings_requests</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">requires_tracking</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fill_color_settings</span><span class="p">)]</span></div>


<div class="viewcode-block" id="plot_clustering_fill.get_dynamic_plot_requests">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_clustering_fill.get_dynamic_plot_requests">[docs]</a>
    <span class="k">def</span> <span class="nf">get_dynamic_plot_requests</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;get_clustering&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;parameters&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">,</span> <span class="s1">&#39;scale&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">,</span> <span class="s1">&#39;clustering_settings&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">clustering_settings</span><span class="p">}}]</span></div>


<div class="viewcode-block" id="plot_clustering_fill.plot">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_clustering_fill.plot">[docs]</a>
    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">:</span> <span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">,</span> <span class="n">group_number</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>  <span class="n">axis_limits</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">x_lim</span><span class="p">,</span> <span class="n">y_lim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_limits</span><span class="p">(</span><span class="n">axis_limits</span><span class="p">)</span>
        <span class="n">clustering</span><span class="p">:</span> <span class="n">Clustering</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">dynamic_data_cache</span><span class="p">[</span><span class="n">group_number</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">get_dynamic_plot_requests</span><span class="p">()[</span>
            <span class="mi">0</span><span class="p">]]</span>

        <span class="n">labels</span> <span class="o">=</span> <span class="n">clustering</span><span class="o">.</span><span class="n">cluster_labels</span>

        <span class="n">colors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">fill_colors</span><span class="p">(</span>
            <span class="n">clusters</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span> <span class="n">group_number</span><span class="o">=</span><span class="n">group_number</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">fill_color_settings</span><span class="p">)</span>

        <span class="n">x_feature_name</span><span class="p">,</span> <span class="n">y_feature_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span>
        <span class="n">x_feature_index</span><span class="p">,</span> <span class="n">y_feature_index</span> <span class="o">=</span> <span class="n">clustering</span><span class="o">.</span><span class="n">get_indices_from_parameters</span><span class="p">(</span>
            <span class="p">[</span><span class="n">x_feature_name</span><span class="p">,</span> <span class="n">y_feature_name</span><span class="p">])</span>

        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">x_lim</span><span class="p">)</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">x_lim</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">nanmin</span><span class="p">(</span><span class="n">clustering</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">x_feature_index</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmax</span><span class="p">(</span>
                <span class="n">clustering</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">x_feature_index</span><span class="p">])]</span>

        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">y_lim</span><span class="p">)</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">y_lim</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">nanmin</span><span class="p">(</span><span class="n">clustering</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">y_feature_index</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmax</span><span class="p">(</span>
                <span class="n">clustering</span><span class="o">.</span><span class="n">data</span><span class="p">[:,</span> <span class="n">y_feature_index</span><span class="p">])]</span>

        <span class="n">xx</span><span class="p">,</span> <span class="n">yy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span>
            <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">x_lim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">x_lim</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span>
                <span class="n">y_lim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">y_lim</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="n">mesh_points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">c_</span><span class="p">[</span><span class="n">xx</span><span class="o">.</span><span class="n">ravel</span><span class="p">(),</span> <span class="n">yy</span><span class="o">.</span><span class="n">ravel</span><span class="p">()]</span>
        <span class="n">mesh_points_scaled</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">mesh_points</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tanh&#39;</span><span class="p">:</span>
            <span class="n">mesh_points_scaled</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arctanh</span><span class="p">(</span><span class="n">mesh_points_scaled</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tanh&#39;</span><span class="p">:</span>
            <span class="n">mesh_points_scaled</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arctanh</span><span class="p">(</span><span class="n">mesh_points_scaled</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">])</span>

        <span class="n">Z</span> <span class="o">=</span> <span class="n">clustering</span><span class="o">.</span><span class="n">predict_cluster</span><span class="p">(</span>
            <span class="n">mesh_points_scaled</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span>
        <span class="n">Z</span> <span class="o">=</span> <span class="n">Z</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">xx</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

        <span class="c1"># Create a ListedColormap with your colors</span>
        <span class="n">cmap</span> <span class="o">=</span> <span class="n">ListedColormap</span><span class="p">(</span><span class="n">colors</span><span class="p">)</span>

        <span class="c1"># Custom function to check if a value is None or NaN</span>
        <span class="k">def</span> <span class="nf">is_nan_or_none</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>

        <span class="c1"># Replace None with np.nan</span>
        <span class="n">Z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">Z</span> <span class="o">==</span> <span class="kc">None</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">Z</span><span class="p">)</span>

        <span class="c1"># Convert the array to float</span>
        <span class="n">Z</span> <span class="o">=</span> <span class="n">Z</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

        <span class="n">im</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">Z</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="p">[</span><span class="n">x_lim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">x_lim</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">y_lim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">y_lim</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
                       <span class="n">origin</span><span class="o">=</span><span class="s1">&#39;lower&#39;</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">alpha</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s1">&#39;nearest&#39;</span><span class="p">,</span>
                       <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">)</span>

        <span class="n">Plot</span><span class="o">.</span><span class="n">tanh_axis_labels</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_x_label</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">Plotter</span><span class="o">.</span><span class="n">_parameter_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_y_label</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">Plotter</span><span class="o">.</span><span class="n">_parameter_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span></div>
</div>



<div class="viewcode-block" id="plot_clustering_degree_of_membership">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_clustering_degree_of_membership">[docs]</a>
<span class="nd">@Plotter</span><span class="o">.</span><span class="n">plot_type</span><span class="p">(</span><span class="s2">&quot;Clustering: Degree of Membership&quot;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">plot_clustering_degree_of_membership</span><span class="p">(</span><span class="n">Plot</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span><span class="p">,</span> <span class="n">color_scheme</span><span class="p">:</span> <span class="n">ColorScheme</span><span class="p">,</span> <span class="n">parameters</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">clustering_settings</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
                 <span class="n">scale</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">show_x_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">show_y_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                 <span class="n">x_lim</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">y_lim</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">colormap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">alpha</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span> <span class="n">resolution</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span> <span class="o">=</span> <span class="n">interface</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span> <span class="o">=</span> <span class="n">color_scheme</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clustering_settings</span> <span class="o">=</span> <span class="n">clustering_settings</span>
        <span class="k">if</span> <span class="s1">&#39;clustering_parameters&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">clustering_settings</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clustering_settings</span><span class="p">[</span><span class="s1">&#39;clustering_parameters&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">scale</span> <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;Linear&#39;</span><span class="p">,</span> <span class="s1">&#39;Linear&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_x_label</span> <span class="o">=</span> <span class="n">show_x_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_y_label</span> <span class="o">=</span> <span class="n">show_y_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x_lim</span> <span class="o">=</span> <span class="n">x_lim</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_y_lim</span> <span class="o">=</span> <span class="n">y_lim</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span> <span class="o">=</span> <span class="n">resolution</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="n">alpha</span>

        <span class="k">def</span> <span class="nf">colormap_to_colormap_settings</span><span class="p">(</span><span class="n">colormap</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">colormap</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="c1"># check if only &#39;mode&#39; and &#39;settings&#39; in dict</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">key</span> <span class="ow">in</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">}</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">colormap</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s1">&#39;Colormap is incorrectly formatted&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">colormap</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">colormap</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Independent Colormap&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;colormap&#39;</span><span class="p">:</span> <span class="n">colormap</span><span class="p">}}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Independent Colormap&#39;</span><span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">colormap_settings</span> <span class="o">=</span> <span class="n">colormap_to_colormap_settings</span><span class="p">(</span><span class="n">colormap</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">colormap_settings</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">method_logger</span><span class="p">[</span><span class="s1">&#39;Color Map&#39;</span><span class="p">][</span><span class="s1">&#39;modes&#39;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Colormap is incorrectly formatted: Mode </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">colormap_settings</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> not in known modes </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">method_logger</span><span class="p">[</span><span class="s1">&#39;Color Map&#39;</span><span class="p">][</span><span class="s1">&#39;modes&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="plot_clustering_degree_of_membership.get_track_clusterings_requests">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_clustering_degree_of_membership.get_track_clusterings_requests">[docs]</a>
    <span class="k">def</span> <span class="nf">get_track_clusterings_requests</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">requires_tracking</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colormap_settings</span><span class="p">)]</span></div>


<div class="viewcode-block" id="plot_clustering_degree_of_membership.get_dynamic_plot_requests">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_clustering_degree_of_membership.get_dynamic_plot_requests">[docs]</a>
    <span class="k">def</span> <span class="nf">get_dynamic_plot_requests</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;get_clustering&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;parameters&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">,</span> <span class="s1">&#39;scale&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">,</span> <span class="s1">&#39;clustering_settings&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">clustering_settings</span><span class="p">}}]</span></div>


<div class="viewcode-block" id="plot_clustering_degree_of_membership.plot">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_clustering_degree_of_membership.plot">[docs]</a>
    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">:</span> <span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">,</span> <span class="n">group_number</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>  <span class="n">axis_limits</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">x_lim</span><span class="p">,</span> <span class="n">y_lim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_limits</span><span class="p">(</span><span class="n">axis_limits</span><span class="p">)</span>
        <span class="n">clustering</span><span class="p">:</span> <span class="n">Clustering</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">dynamic_data_cache</span><span class="p">[</span><span class="n">group_number</span><span class="p">][</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_dynamic_plot_requests</span><span class="p">()[</span><span class="mi">0</span><span class="p">]]</span>
        <span class="n">colormap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span>
            <span class="n">group_number</span><span class="o">=</span><span class="n">group_number</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">colormap_settings</span><span class="p">)</span>

        <span class="n">xx</span><span class="p">,</span> <span class="n">yy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span>
            <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">x_lim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">x_lim</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span>
                <span class="n">y_lim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">y_lim</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="n">mesh_points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">c_</span><span class="p">[</span><span class="n">xx</span><span class="o">.</span><span class="n">ravel</span><span class="p">(),</span> <span class="n">yy</span><span class="o">.</span><span class="n">ravel</span><span class="p">()]</span>
        <span class="n">mesh_points_scaled</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">mesh_points</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tanh&#39;</span><span class="p">:</span>
            <span class="n">mesh_points_scaled</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arctanh</span><span class="p">(</span><span class="n">mesh_points_scaled</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tanh&#39;</span><span class="p">:</span>
            <span class="n">mesh_points_scaled</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arctanh</span><span class="p">(</span><span class="n">mesh_points_scaled</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">])</span>

        <span class="n">Z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">clustering</span><span class="o">.</span><span class="n">degree_of_membership</span><span class="p">(</span><span class="n">mesh_points_scaled</span><span class="p">))</span>
        <span class="n">Z</span> <span class="o">=</span> <span class="n">Z</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">Z</span> <span class="o">=</span> <span class="n">Z</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">xx</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">contourf</span><span class="p">(</span><span class="n">xx</span><span class="p">,</span> <span class="n">yy</span><span class="p">,</span> <span class="n">Z</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">alpha</span><span class="p">,</span>
                    <span class="n">levels</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span> <span class="n">cmap</span><span class="o">=</span><span class="n">colormap</span><span class="p">)</span>

        <span class="n">Plot</span><span class="o">.</span><span class="n">tanh_axis_labels</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_x_label</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">Plotter</span><span class="o">.</span><span class="n">_parameter_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_y_label</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">Plotter</span><span class="o">.</span><span class="n">_parameter_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span></div>
</div>



<div class="viewcode-block" id="plot_clustering_density">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_clustering_density">[docs]</a>
<span class="nd">@Plotter</span><span class="o">.</span><span class="n">plot_type</span><span class="p">(</span><span class="s2">&quot;Clustering: Density Plot&quot;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">plot_clustering_density</span><span class="p">(</span><span class="n">Plot</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span><span class="p">,</span> <span class="n">color_scheme</span><span class="p">:</span> <span class="n">ColorScheme</span><span class="p">,</span> <span class="n">parameters</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">clustering_settings</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
                 <span class="n">scale</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">show_x_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">show_y_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                 <span class="n">x_lim</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">y_lim</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">fill_color</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">alpha</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">levels</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="n">thresh</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">resolution</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span> <span class="o">=</span> <span class="n">interface</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span> <span class="o">=</span> <span class="n">color_scheme</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clustering_settings</span> <span class="o">=</span> <span class="n">clustering_settings</span>
        <span class="k">if</span> <span class="s1">&#39;clustering_parameters&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">clustering_settings</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clustering_settings</span><span class="p">[</span><span class="s1">&#39;clustering_parameters&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">scale</span> <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;Linear&#39;</span><span class="p">,</span> <span class="s1">&#39;Linear&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_x_label</span> <span class="o">=</span> <span class="n">show_x_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_y_label</span> <span class="o">=</span> <span class="n">show_y_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x_lim</span> <span class="o">=</span> <span class="n">x_lim</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_y_lim</span> <span class="o">=</span> <span class="n">y_lim</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span> <span class="o">=</span> <span class="n">resolution</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="n">alpha</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">levels</span> <span class="o">=</span> <span class="n">levels</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thresh</span> <span class="o">=</span> <span class="n">thresh</span>

        <span class="k">def</span> <span class="nf">fill_color_to_fill_color_settings</span><span class="p">(</span><span class="n">fill_color</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fill_color</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="c1"># check if only &#39;mode&#39; and &#39;settings&#39; in dict</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">key</span> <span class="ow">in</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">}</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">fill_color</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s1">&#39;Histogram color is incorrectly formatted&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">fill_color</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Cluster Color&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;clustering_settings&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">clustering_settings</span><span class="p">}}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fill_color_settings</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">fill_color_to_fill_color_settings</span><span class="p">(</span>
            <span class="n">fill_color</span><span class="p">)</span>

<div class="viewcode-block" id="plot_clustering_density.get_track_clusterings_requests">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_clustering_density.get_track_clusterings_requests">[docs]</a>
    <span class="k">def</span> <span class="nf">get_track_clusterings_requests</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">clustering_settings</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">requires_tracking</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fill_color_settings</span><span class="p">)]</span></div>


<div class="viewcode-block" id="plot_clustering_density.get_dynamic_plot_requests">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_clustering_density.get_dynamic_plot_requests">[docs]</a>
    <span class="k">def</span> <span class="nf">get_dynamic_plot_requests</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;get_clustering&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;parameters&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">,</span> <span class="s1">&#39;scale&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">,</span> <span class="s1">&#39;clustering_settings&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">clustering_settings</span><span class="p">}}]</span></div>


<div class="viewcode-block" id="plot_clustering_density.plot">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_clustering_density.plot">[docs]</a>
    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">:</span> <span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">,</span> <span class="n">group_number</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>  <span class="n">axis_limits</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">x_lim</span><span class="p">,</span> <span class="n">y_lim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_limits</span><span class="p">(</span><span class="n">axis_limits</span><span class="p">)</span>
        <span class="n">clustering</span><span class="p">:</span> <span class="n">Clustering</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">dynamic_data_cache</span><span class="p">[</span><span class="n">group_number</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">get_dynamic_plot_requests</span><span class="p">()[</span>
            <span class="mi">0</span><span class="p">]]</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="n">clustering</span><span class="o">.</span><span class="n">cluster_labels</span>

        <span class="n">colors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">fill_colors</span><span class="p">(</span>
            <span class="n">clusters</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span> <span class="n">group_number</span><span class="o">=</span><span class="n">group_number</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">fill_color_settings</span><span class="p">)</span>

        <span class="n">xx</span><span class="p">,</span> <span class="n">yy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span>
            <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">x_lim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">x_lim</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span>
                <span class="n">y_lim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">y_lim</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolution</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="n">mesh_points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">c_</span><span class="p">[</span><span class="n">xx</span><span class="o">.</span><span class="n">ravel</span><span class="p">(),</span> <span class="n">yy</span><span class="o">.</span><span class="n">ravel</span><span class="p">()]</span>
        <span class="n">mesh_points_scaled</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">mesh_points</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tanh&#39;</span><span class="p">:</span>
            <span class="n">mesh_points_scaled</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arctanh</span><span class="p">(</span><span class="n">mesh_points_scaled</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tanh&#39;</span><span class="p">:</span>
            <span class="n">mesh_points_scaled</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arctanh</span><span class="p">(</span><span class="n">mesh_points_scaled</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">])</span>

        <span class="n">Z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">clustering</span><span class="o">.</span><span class="n">degree_of_membership</span><span class="p">(</span><span class="n">mesh_points_scaled</span><span class="p">))</span>
        <span class="n">Z</span> <span class="o">=</span> <span class="n">Z</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">*</span><span class="n">xx</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
        <span class="n">Z_index</span> <span class="o">=</span> <span class="n">Z</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">Z_flat</span> <span class="o">=</span> <span class="n">Z</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>

        <span class="n">xx_flat</span> <span class="o">=</span> <span class="n">xx</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
        <span class="n">yy_flat</span> <span class="o">=</span> <span class="n">yy</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
        <span class="n">Z_index_flat</span> <span class="o">=</span> <span class="n">Z_index</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>

        <span class="c1"># Create a mapping from integer categories to custom labels</span>
        <span class="n">Z_index_flat_categorical</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">(</span><span class="n">Z_index_flat</span><span class="p">)</span>
        <span class="n">category_mapping</span> <span class="o">=</span> <span class="p">{</span><span class="n">i</span><span class="p">:</span> <span class="n">label</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">labels</span><span class="p">)}</span>

        <span class="c1"># Map the categories in Z_index_flat_categorical to custom labels</span>
        <span class="n">Z_index_flat_mapped</span> <span class="o">=</span> <span class="n">Z_index_flat_categorical</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">category_mapping</span><span class="p">)</span>

        <span class="n">sns</span><span class="o">.</span><span class="n">kdeplot</span><span class="p">(</span>
            <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
            <span class="n">x</span><span class="o">=</span><span class="n">xx_flat</span><span class="p">,</span>
            <span class="n">y</span><span class="o">=</span><span class="n">yy_flat</span><span class="p">,</span>
            <span class="n">hue</span><span class="o">=</span><span class="n">Z_index_flat_mapped</span><span class="p">,</span>  <span class="c1"># Use the mapped data for hue</span>
            <span class="n">weights</span><span class="o">=</span><span class="n">Z_flat</span><span class="p">,</span>
            <span class="n">levels</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">levels</span><span class="p">,</span>
            <span class="n">thresh</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">thresh</span><span class="p">,</span>
            <span class="n">alpha</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">alpha</span><span class="p">,</span>
            <span class="n">palette</span><span class="o">=</span><span class="n">colors</span>  <span class="c1"># Use the &#39;colors&#39; list as a palette</span>
        <span class="p">)</span>

        <span class="n">Plot</span><span class="o">.</span><span class="n">tanh_axis_labels</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_x_label</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">Plotter</span><span class="o">.</span><span class="n">_parameter_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_y_label</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">Plotter</span><span class="o">.</span><span class="n">_parameter_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span></div>
</div>



<div class="viewcode-block" id="plot_clustered_histogram">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_clustered_histogram">[docs]</a>
<span class="nd">@Plotter</span><span class="o">.</span><span class="n">plot_type</span><span class="p">(</span><span class="s2">&quot;Clustered Histogram&quot;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">plot_clustered_histogram</span><span class="p">(</span><span class="n">Plot</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span><span class="p">,</span> <span class="n">color_scheme</span><span class="p">:</span> <span class="n">ColorScheme</span><span class="p">,</span> <span class="n">parameter</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                 <span class="n">clustering_settings</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">scale</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">rotated</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                 <span class="n">show_x_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">show_y_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                 <span class="n">exclude_types</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(),</span>
                 <span class="n">x_lim</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">y_lim</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">fill_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span> <span class="o">=</span> <span class="n">interface</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="p">:</span> <span class="n">ColorScheme</span> <span class="o">=</span> <span class="n">color_scheme</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameter</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">parameter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">parameter</span><span class="p">,)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clustering_settings</span> <span class="o">=</span> <span class="n">clustering_settings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">scale</span> <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;Linear&#39;</span><span class="p">,</span> <span class="s1">&#39;Linear&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exclude_types</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">exclude_types</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rotated</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">rotated</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_x_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">show_x_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_y_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">show_y_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x_lim</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">x_lim</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_y_lim</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">y_lim</span>

        <span class="k">def</span> <span class="nf">fill_color_to_fill_color_settings</span><span class="p">(</span><span class="n">fill_color</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fill_color</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="c1"># check if only &#39;mode&#39; and &#39;settings&#39; in dict</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">key</span> <span class="ow">in</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">}</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">fill_color</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s1">&#39;Histogram color is incorrectly formatted&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">fill_color</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Cluster Color&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;clustering_settings&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">clustering_settings</span><span class="p">}}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fill_color_settings</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">fill_color_to_fill_color_settings</span><span class="p">(</span>
            <span class="n">fill_color</span><span class="p">)</span>

<div class="viewcode-block" id="plot_clustered_histogram.get_track_clusterings_requests">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_clustered_histogram.get_track_clusterings_requests">[docs]</a>
    <span class="k">def</span> <span class="nf">get_track_clusterings_requests</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">requires_tracking</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fill_color_settings</span><span class="p">)]</span></div>


<div class="viewcode-block" id="plot_clustered_histogram.settings_to_code">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_clustered_histogram.settings_to_code">[docs]</a>
    <span class="k">def</span> <span class="nf">settings_to_code</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">parameter</span><span class="se">\&#39;</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameter</span> <span class="o">+</span>
                <span class="s1">&#39;,</span><span class="se">\&#39;</span><span class="s1">scale</span><span class="se">\&#39;</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span> <span class="o">+</span>
                <span class="s1">&#39;,</span><span class="se">\&#39;</span><span class="s1">rotated</span><span class="se">\&#39;</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rotated</span><span class="p">)</span> <span class="o">+</span>
                <span class="s1">&#39;,</span><span class="se">\&#39;</span><span class="s1">show_x_label</span><span class="se">\&#39;</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">show_x_label</span><span class="p">)</span> <span class="o">+</span>
                <span class="s1">&#39;,</span><span class="se">\&#39;</span><span class="s1">show_y_label</span><span class="se">\&#39;</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">show_y_label</span><span class="p">)</span> <span class="o">+</span>
                <span class="s1">&#39;,</span><span class="se">\&#39;</span><span class="s1">x_lim</span><span class="se">\&#39;</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_x_lim</span><span class="p">)</span> <span class="o">+</span>
                <span class="s1">&#39;,</span><span class="se">\&#39;</span><span class="s1">y_lim</span><span class="se">\&#39;</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_y_lim</span><span class="p">)</span> <span class="o">+</span>
                <span class="s1">&#39;,</span><span class="se">\&#39;</span><span class="s1">fill_color</span><span class="se">\&#39;</span><span class="s1">:&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fill_color_settings</span><span class="p">))</span></div>


<div class="viewcode-block" id="plot_clustered_histogram.settings">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_clustered_histogram.settings">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">settings</span><span class="p">(</span><span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Parameter</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">ListParameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Parameter&#39;</span><span class="p">,</span> <span class="n">parameter_name</span><span class="o">=</span><span class="s1">&#39;parameter&#39;</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="n">interface</span><span class="o">.</span><span class="n">node_parameters</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;Parameter of the histogram&#39;</span><span class="p">),</span>
                <span class="n">ListParameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Scale&#39;</span><span class="p">,</span> <span class="n">parameter_name</span><span class="o">=</span><span class="s1">&#39;scale&#39;</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="p">[</span>
                              <span class="s1">&#39;Linear&#39;</span><span class="p">,</span> <span class="s1">&#39;Tanh&#39;</span><span class="p">],</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;Scale of the parameter&#39;</span><span class="p">),</span>
                <span class="n">BoolParameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Rotate&#39;</span><span class="p">,</span> <span class="n">parameter_name</span><span class="o">=</span><span class="s1">&#39;rotated&#39;</span><span class="p">,</span>
                              <span class="n">default_value</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;Should the histogram be rotated?&#39;</span><span class="p">),</span>
                <span class="n">BoolParameter</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Show X Label&#39;</span><span class="p">,</span> <span class="n">parameter_name</span><span class="o">=</span><span class="s1">&#39;show_x_label&#39;</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">),</span>
                <span class="n">BoolParameter</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Show Y Label&#39;</span><span class="p">,</span> <span class="n">parameter_name</span><span class="o">=</span><span class="s1">&#39;show_y_label&#39;</span><span class="p">,</span> <span class="n">default_value</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">),</span>
                <span class="n">NoneRangeParameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;X Limit&#39;</span><span class="p">,</span> <span class="n">parameter_name</span><span class="o">=</span><span class="s1">&#39;x_lim&#39;</span><span class="p">,</span> <span class="n">default_min_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                   <span class="n">default_max_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">limits</span><span class="o">=</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">),</span>
                <span class="n">NoneRangeParameter</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Y Limit&#39;</span><span class="p">,</span> <span class="n">parameter_name</span><span class="o">=</span><span class="s1">&#39;y_lim&#39;</span><span class="p">,</span> <span class="n">default_min_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                   <span class="n">default_max_value</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">limits</span><span class="o">=</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">),</span>
                <span class="p">]</span></div>


<div class="viewcode-block" id="plot_clustered_histogram.qt_to_settings">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_clustered_histogram.qt_to_settings">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">qt_to_settings</span><span class="p">(</span><span class="n">qt_settings</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="n">qt_settings</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">parameter_value</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;parameter&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">settings</span><span class="p">[</span><span class="s1">&#39;parameter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">parameter_value</span>
        <span class="n">settings</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">settings</span><span class="p">[</span><span class="s1">&#39;scale&#39;</span><span class="p">],</span> <span class="s1">&#39;Linear&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">settings</span></div>


<div class="viewcode-block" id="plot_clustered_histogram.get_dynamic_plot_requests">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_clustered_histogram.get_dynamic_plot_requests">[docs]</a>
    <span class="k">def</span> <span class="nf">get_dynamic_plot_requests</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;get_clustering&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;parameters&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">,</span> <span class="s1">&#39;scale&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">,</span> <span class="s1">&#39;clustering_settings&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">clustering_settings</span><span class="p">}},</span>
                <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;calculate_node_values&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;parameters&#39;</span><span class="p">:</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parameter</span><span class="p">,</span> <span class="s1">&#39;Type&#39;</span><span class="p">),</span> <span class="s1">&#39;scale&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">}}]</span></div>


<div class="viewcode-block" id="plot_clustered_histogram.plot">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_clustered_histogram.plot">[docs]</a>
    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">:</span> <span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">,</span> <span class="n">group_number</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>  <span class="n">axis_limits</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Histogram expects only one parameter&#39;</span><span class="p">)</span>

        <span class="n">clustering</span><span class="p">:</span> <span class="n">Clustering</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">dynamic_data_cache</span><span class="p">[</span><span class="n">group_number</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">get_dynamic_plot_requests</span><span class="p">()[</span>
            <span class="mi">0</span><span class="p">]]</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="n">clustering</span><span class="o">.</span><span class="n">cluster_labels</span>

        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">dynamic_data_cache</span><span class="p">[</span><span class="n">group_number</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">get_dynamic_plot_requests</span><span class="p">()[</span>
            <span class="mi">1</span><span class="p">]]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parameter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">parameter</span><span class="p">])</span>

        <span class="c1"># Now get the limits and set default values if necessary</span>
        <span class="n">x_lim</span><span class="p">,</span> <span class="n">y_lim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_limits</span><span class="p">(</span><span class="n">axis_limits</span><span class="p">)</span>

        <span class="n">colors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">fill_colors</span><span class="p">(</span>
            <span class="n">clusters</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span> <span class="n">group_number</span><span class="o">=</span><span class="n">group_number</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">fill_color_settings</span><span class="p">)</span>

        <span class="n">cluster_labels</span> <span class="o">=</span> <span class="n">clustering</span><span class="o">.</span><span class="n">cluster_labels</span>

        <span class="c1"># Iterate through each cluster and plot its histogram</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">cluster</span><span class="p">,</span> <span class="n">color</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">cluster_labels</span><span class="p">,</span> <span class="n">colors</span><span class="p">)):</span>
            <span class="n">cluster_values</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">clustering</span><span class="o">.</span><span class="n">cluster_indexes</span> <span class="o">==</span> <span class="n">i</span><span class="p">)]</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rotated</span><span class="p">:</span>
                <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">cluster_values</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">element</span><span class="o">=</span><span class="s2">&quot;step&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                             <span class="n">stat</span><span class="o">=</span><span class="s2">&quot;density&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;Cluster </span><span class="si">{</span><span class="n">cluster</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">cluster_values</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">element</span><span class="o">=</span><span class="s2">&quot;step&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                             <span class="n">stat</span><span class="o">=</span><span class="s2">&quot;density&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;Cluster </span><span class="si">{</span><span class="n">cluster</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

        <span class="n">Plot</span><span class="o">.</span><span class="n">tanh_axis_labels</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">x_lim</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">*</span><span class="n">x_lim</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">y_lim</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="o">*</span><span class="n">y_lim</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_x_label</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">Plotter</span><span class="o">.</span><span class="n">_parameter_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parameter</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameter</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_y_label</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Density&#39;</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="plot_time_line">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_time_line">[docs]</a>
<span class="nd">@Plotter</span><span class="o">.</span><span class="n">plot_type</span><span class="p">(</span><span class="s2">&quot;Static: Time line&quot;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">plot_time_line</span><span class="p">(</span><span class="n">Plot</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span><span class="p">,</span> <span class="n">color_scheme</span><span class="p">:</span> <span class="n">ColorScheme</span><span class="p">,</span> <span class="n">parameters</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
                 <span class="n">scale</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">show_x_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">show_y_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                 <span class="n">x_lim</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">y_lim</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">linestyle</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span> <span class="o">=</span> <span class="n">interface</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span> <span class="o">=</span> <span class="n">color_scheme</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">scale</span> <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;Linear&#39;</span><span class="p">,</span> <span class="s1">&#39;Linear&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_x_label</span> <span class="o">=</span> <span class="n">show_x_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_y_label</span> <span class="o">=</span> <span class="n">show_y_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x_lim</span> <span class="o">=</span> <span class="n">x_lim</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_y_lim</span> <span class="o">=</span> <span class="n">y_lim</span>

        <span class="k">def</span> <span class="nf">time_color_to_time_color_settings</span><span class="p">(</span><span class="n">time_color</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">time_color</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="c1"># check if only &#39;mode&#39; and &#39;settings&#39; in dict</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">key</span> <span class="ow">in</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">}</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">time_color</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s1">&#39;Time color is incorrectly formatted&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">time_color</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">time_color</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Constant Color&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="n">time_color</span><span class="p">}}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Constant Color&#39;</span><span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">time_color_settings</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">time_color_to_time_color_settings</span><span class="p">(</span>
            <span class="n">color</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_color_settings</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">method_logger</span><span class="p">[</span><span class="s1">&#39;Timeline Color&#39;</span><span class="p">][</span><span class="s1">&#39;modes&#39;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Time color is incorrectly formatted: Mode </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">time_color_settings</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> not in known modes </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">method_logger</span><span class="p">[</span><span class="s1">&#39;Timeline Color&#39;</span><span class="p">][</span><span class="s1">&#39;modes&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">time_style_to_time_style_settings</span><span class="p">(</span><span class="n">time_style</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">time_style</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="c1"># check if only &#39;mode&#39; and &#39;settings&#39; in dict</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">key</span> <span class="ow">in</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">}</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">time_style</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s1">&#39;Time style is incorrectly formatted&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">time_style</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">time_style</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Constant Style&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;style&#39;</span><span class="p">:</span> <span class="n">time_style</span><span class="p">}}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Constant Style&#39;</span><span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">time_style_settings</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">time_style_to_time_style_settings</span><span class="p">(</span>
            <span class="n">linestyle</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_style_settings</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">method_logger</span><span class="p">[</span><span class="s1">&#39;Timeline Style&#39;</span><span class="p">][</span><span class="s1">&#39;modes&#39;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Time style is incorrectly formatted: Mode </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">time_style_settings</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> not in known modes </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">method_logger</span><span class="p">[</span><span class="s1">&#39;Timeline Style&#39;</span><span class="p">][</span><span class="s1">&#39;modes&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="plot_time_line.get_dynamic_plot_requests">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_time_line.get_dynamic_plot_requests">[docs]</a>
    <span class="k">def</span> <span class="nf">get_dynamic_plot_requests</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;mean_time&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{}}]</span></div>


<div class="viewcode-block" id="plot_time_line.plot">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_time_line.plot">[docs]</a>
    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">:</span> <span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">,</span> <span class="n">group_number</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>  <span class="n">axis_limits</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">x_lim</span><span class="p">,</span> <span class="n">y_lim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_limits</span><span class="p">(</span><span class="n">axis_limits</span><span class="p">)</span>

        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">dynamic_data_cache</span><span class="p">[</span><span class="n">group_number</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">get_dynamic_plot_requests</span><span class="p">()[</span>
            <span class="mi">0</span><span class="p">]]</span>
        <span class="n">time_range</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">group_time_range</span><span class="p">()</span>

        <span class="n">color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">timeline_color</span><span class="p">(</span>
            <span class="n">group_number</span><span class="o">=</span><span class="n">group_number</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">time_color_settings</span><span class="p">)</span>
        <span class="n">linestyle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">timeline_linestyle</span><span class="p">(</span>
            <span class="n">group_number</span><span class="o">=</span><span class="n">group_number</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">time_style_settings</span><span class="p">)</span>

        <span class="n">x_parameter</span><span class="p">,</span> <span class="n">y_parameter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span>

        <span class="k">if</span> <span class="n">x_parameter</span> <span class="o">==</span> <span class="s1">&#39;Time&#39;</span><span class="p">:</span>
            <span class="c1"># Time is on the x-axis, draw a vertical line</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="n">linestyle</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">time_range</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">y_parameter</span> <span class="o">==</span> <span class="s1">&#39;Time&#39;</span><span class="p">:</span>
            <span class="c1"># Time is on the y-axis, draw a horizontal line</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="n">linestyle</span><span class="p">)</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">time_range</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_x_label</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">Plotter</span><span class="o">.</span><span class="n">_parameter_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="n">x_parameter</span><span class="p">,</span> <span class="n">x_parameter</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_y_label</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">Plotter</span><span class="o">.</span><span class="n">_parameter_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="n">y_parameter</span><span class="p">,</span> <span class="n">y_parameter</span><span class="p">))</span></div>
</div>



<div class="viewcode-block" id="plot_node_lines">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_node_lines">[docs]</a>
<span class="nd">@Plotter</span><span class="o">.</span><span class="n">plot_type</span><span class="p">(</span><span class="s2">&quot;Static: Node lines&quot;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">plot_node_lines</span><span class="p">(</span><span class="n">Plot</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span><span class="p">,</span> <span class="n">color_scheme</span><span class="p">:</span> <span class="n">ColorScheme</span><span class="p">,</span> <span class="n">parameters</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
                 <span class="n">scale</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">exclude_types</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(),</span>
                 <span class="n">show_x_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">show_y_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                 <span class="n">x_lim</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">y_lim</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">color</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">linestyle</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span> <span class="o">=</span> <span class="n">interface</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span> <span class="o">=</span> <span class="n">color_scheme</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">scale</span> <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;Linear&#39;</span><span class="p">,</span> <span class="s1">&#39;Linear&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">exclude_types</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">exclude_types</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_x_label</span> <span class="o">=</span> <span class="n">show_x_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_y_label</span> <span class="o">=</span> <span class="n">show_y_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x_lim</span> <span class="o">=</span> <span class="n">x_lim</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_y_lim</span> <span class="o">=</span> <span class="n">y_lim</span>

        <span class="k">def</span> <span class="nf">line_color_to_line_color_settings</span><span class="p">(</span><span class="n">line_color</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">line_color</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="c1"># check if only &#39;mode&#39; and &#39;settings&#39; in dict</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">key</span> <span class="ow">in</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">}</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">line_color</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s1">&#39;Line color is incorrectly formatted&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">line_color</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">line_color</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Constant Color&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="n">line_color</span><span class="p">}}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Constant Color&#39;</span><span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">line_color_settings</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">line_color_to_line_color_settings</span><span class="p">(</span>
            <span class="n">color</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">line_color_settings</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">method_logger</span><span class="p">[</span><span class="s1">&#39;Line Color&#39;</span><span class="p">][</span><span class="s1">&#39;modes&#39;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Line color is incorrectly formatted: Mode </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">line_color_settings</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> not in known modes </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">method_logger</span><span class="p">[</span><span class="s1">&#39;Line Color&#39;</span><span class="p">][</span><span class="s1">&#39;modes&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">line_style_to_line_style_settings</span><span class="p">(</span><span class="n">line_style</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">line_style</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="c1"># check if only &#39;mode&#39; and &#39;settings&#39; in dict</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">key</span> <span class="ow">in</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">}</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">line_style</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s1">&#39;Line style is incorrectly formatted&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">line_style</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">line_style</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Constant Style&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;style&#39;</span><span class="p">:</span> <span class="n">line_style</span><span class="p">}}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Constant Style&#39;</span><span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">line_style_settings</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">line_style_to_line_style_settings</span><span class="p">(</span>
            <span class="n">linestyle</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">line_style_settings</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">method_logger</span><span class="p">[</span><span class="s1">&#39;Line Style&#39;</span><span class="p">][</span><span class="s1">&#39;modes&#39;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Line style is incorrectly formatted: Mode </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">line_style_settings</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> not in known modes </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">method_logger</span><span class="p">[</span><span class="s1">&#39;Line Style&#39;</span><span class="p">][</span><span class="s1">&#39;modes&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_static_data</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="plot_node_lines.get_track_clusterings_requests">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_node_lines.get_track_clusterings_requests">[docs]</a>
    <span class="k">def</span> <span class="nf">get_track_clusterings_requests</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">requires_tracking</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">line_style_settings</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">requires_tracking</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">line_color_settings</span><span class="p">)]</span></div>


<div class="viewcode-block" id="plot_node_lines.get_static_plot_requests">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_node_lines.get_static_plot_requests">[docs]</a>
    <span class="k">def</span> <span class="nf">get_static_plot_requests</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">+</span> <span class="p">(</span><span class="s1">&#39;Type&#39;</span><span class="p">,)</span>
        <span class="k">return</span> <span class="p">[{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;calculate_node_values&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;parameters&#39;</span><span class="p">:</span> <span class="n">parameters</span><span class="p">,</span> <span class="s1">&#39;scale&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">}}]</span></div>


<div class="viewcode-block" id="plot_node_lines.data">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_node_lines.data">[docs]</a>
    <span class="k">def</span> <span class="nf">data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_static_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_static_data</span>

        <span class="n">data_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">static_data_cache</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_static_plot_requests</span><span class="p">()[</span>
            <span class="mi">0</span><span class="p">]]</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform_data</span><span class="p">(</span><span class="n">data_list</span><span class="p">)</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Type&#39;</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">exclude_types</span><span class="p">)</span>
        <span class="n">flat_mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">mask</span><span class="p">,</span> <span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">masked_data</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">value</span><span class="p">[</span><span class="n">flat_mask</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span>
                       <span class="n">value</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;Time&#39;</span><span class="p">,</span> <span class="s1">&#39;Nodes&#39;</span><span class="p">)}</span>
        <span class="n">masked_data</span><span class="p">[</span><span class="s1">&#39;Time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Time&#39;</span><span class="p">]</span>
        <span class="n">masked_data</span><span class="p">[</span><span class="s1">&#39;Nodes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">node</span> <span class="k">for</span> <span class="n">node</span><span class="p">,</span>
                                <span class="n">m</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Nodes&#39;</span><span class="p">],</span> <span class="n">flat_mask</span><span class="p">)</span> <span class="k">if</span> <span class="n">m</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_static_data</span> <span class="o">=</span> <span class="n">masked_data</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_static_data</span></div>


<div class="viewcode-block" id="plot_node_lines.plot">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_node_lines.plot">[docs]</a>
    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">:</span> <span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">,</span> <span class="n">group_number</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>  <span class="n">axis_limits</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>

        <span class="n">x_lim</span><span class="p">,</span> <span class="n">y_lim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_limits</span><span class="p">(</span><span class="n">axis_limits</span><span class="p">)</span>

        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">()</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Nodes&#39;</span><span class="p">]</span>

        <span class="n">colors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">line_color</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="n">nodes</span><span class="p">,</span>
                                                       <span class="n">group_number</span><span class="o">=</span><span class="n">group_number</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">line_color_settings</span><span class="p">))</span>
        <span class="n">linestyle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">line_linestyle</span><span class="p">(</span>
            <span class="n">group_number</span><span class="o">=</span><span class="n">group_number</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">line_style_settings</span><span class="p">)</span>

        <span class="n">x_parameter</span><span class="p">,</span> <span class="n">y_parameter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">x_parameter</span> <span class="o">==</span> <span class="s1">&#39;Time&#39;</span> <span class="ow">or</span> <span class="n">y_parameter</span> <span class="o">==</span> <span class="s1">&#39;Time&#39;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;One of the parameters should be Time.&#39;</span><span class="p">)</span>

        <span class="c1"># Determine which axis time is on</span>
        <span class="n">time_is_x_axis</span> <span class="o">=</span> <span class="n">x_parameter</span> <span class="o">==</span> <span class="s1">&#39;Time&#39;</span>

        <span class="n">x_values</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">x_parameter</span><span class="p">]</span>
        <span class="n">y_values</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">y_parameter</span><span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">0</span> <span class="k">if</span> <span class="n">time_is_x_axis</span> <span class="k">else</span> <span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tanh&#39;</span><span class="p">:</span>
            <span class="n">x_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tanh</span><span class="p">(</span><span class="n">x_values</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">1</span> <span class="k">if</span> <span class="n">time_is_x_axis</span> <span class="k">else</span> <span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tanh&#39;</span><span class="p">:</span>
            <span class="n">y_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tanh</span><span class="p">(</span><span class="n">y_values</span><span class="p">)</span>

        <span class="c1"># Plotting</span>
        <span class="k">if</span> <span class="n">Plot</span><span class="o">.</span><span class="n">is_single_color</span><span class="p">(</span><span class="n">colors</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">node_values</span> <span class="ow">in</span> <span class="n">y_values</span><span class="p">:</span>
                <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x_values</span><span class="p">,</span> <span class="n">node_values</span><span class="p">,</span>
                        <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="n">linestyle</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">node_values</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">y_values</span><span class="p">,</span> <span class="n">colors</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">time_is_x_axis</span><span class="p">:</span>
                    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x_values</span><span class="p">,</span> <span class="n">node_values</span><span class="p">,</span>
                            <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="n">linestyle</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">node_values</span><span class="p">,</span> <span class="n">x_values</span><span class="p">,</span>
                            <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="n">linestyle</span><span class="p">)</span>

        <span class="c1"># Set limits</span>
        <span class="k">if</span> <span class="n">x_lim</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">*</span><span class="n">x_lim</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">y_lim</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="o">*</span><span class="n">y_lim</span><span class="p">)</span>

        <span class="n">Plot</span><span class="o">.</span><span class="n">tanh_axis_labels</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_x_label</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">Plotter</span><span class="o">.</span><span class="n">_parameter_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_y_label</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">Plotter</span><span class="o">.</span><span class="n">_parameter_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span></div>
</div>



<div class="viewcode-block" id="plot_graph_line">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_graph_line">[docs]</a>
<span class="nd">@Plotter</span><span class="o">.</span><span class="n">plot_type</span><span class="p">(</span><span class="s2">&quot;Static: Graph line&quot;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">plot_graph_line</span><span class="p">(</span><span class="n">Plot</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span><span class="p">,</span> <span class="n">color_scheme</span><span class="p">:</span> <span class="n">ColorScheme</span><span class="p">,</span> <span class="n">parameters</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
                 <span class="n">scale</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">show_x_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">show_y_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                 <span class="n">x_lim</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">y_lim</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">function</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;Mean&#39;</span><span class="p">,</span>
                 <span class="n">color</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">linestyle</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Graph parameters functions list can be accessed in Group.common_functions.keys()</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span> <span class="o">=</span> <span class="n">interface</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span> <span class="o">=</span> <span class="n">color_scheme</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">scale</span> <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;Linear&#39;</span><span class="p">,</span> <span class="s1">&#39;Linear&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_x_label</span> <span class="o">=</span> <span class="n">show_x_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_y_label</span> <span class="o">=</span> <span class="n">show_y_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x_lim</span> <span class="o">=</span> <span class="n">x_lim</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_y_lim</span> <span class="o">=</span> <span class="n">y_lim</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">function</span> <span class="o">=</span> <span class="n">function</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_static_data</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">def</span> <span class="nf">line_color_to_line_color_settings</span><span class="p">(</span><span class="n">line_color</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">line_color</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="c1"># check if only &#39;mode&#39; and &#39;settings&#39; in dict</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">key</span> <span class="ow">in</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">}</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">line_color</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s1">&#39;Line color is incorrectly formatted&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">line_color</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">line_color</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Constant Color&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="n">line_color</span><span class="p">}}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Constant Color&#39;</span><span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">line_color_settings</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">line_color_to_line_color_settings</span><span class="p">(</span>
            <span class="n">color</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">line_color_settings</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">method_logger</span><span class="p">[</span><span class="s1">&#39;Graph Line Color&#39;</span><span class="p">][</span><span class="s1">&#39;modes&#39;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Line color is incorrectly formatted: Mode </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">line_color_settings</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> not in known modes </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">method_logger</span><span class="p">[</span><span class="s1">&#39;Graph Line Color&#39;</span><span class="p">][</span><span class="s1">&#39;modes&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">line_style_to_line_style_settings</span><span class="p">(</span><span class="n">line_style</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">line_style</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="c1"># check if only &#39;mode&#39; and &#39;settings&#39; in dict</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">key</span> <span class="ow">in</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">}</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">line_style</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s1">&#39;Line style is incorrectly formatted&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">line_style</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">line_style</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Constant Style&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;style&#39;</span><span class="p">:</span> <span class="n">line_style</span><span class="p">}}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Constant Style&#39;</span><span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">line_style_settings</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">line_style_to_line_style_settings</span><span class="p">(</span>
            <span class="n">linestyle</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">line_style_settings</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">method_logger</span><span class="p">[</span><span class="s1">&#39;Line Style&#39;</span><span class="p">][</span><span class="s1">&#39;modes&#39;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Line style is incorrectly formatted: Mode </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">line_style_settings</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> not in known modes </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">method_logger</span><span class="p">[</span><span class="s1">&#39;Line Style&#39;</span><span class="p">][</span><span class="s1">&#39;modes&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_static_data</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="plot_graph_line.get_track_clusterings_requests">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_graph_line.get_track_clusterings_requests">[docs]</a>
    <span class="k">def</span> <span class="nf">get_track_clusterings_requests</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">requires_tracking</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">line_style_settings</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">requires_tracking</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">line_color_settings</span><span class="p">)]</span></div>


<div class="viewcode-block" id="plot_graph_line.get_static_plot_requests">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_graph_line.get_static_plot_requests">[docs]</a>
    <span class="k">def</span> <span class="nf">get_static_plot_requests</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;calculate_function_of_node_values&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;parameters&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">,</span> <span class="s1">&#39;scale&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">,</span> <span class="s1">&#39;function&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="p">}}]</span></div>


<div class="viewcode-block" id="plot_graph_line.data">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_graph_line.data">[docs]</a>
    <span class="k">def</span> <span class="nf">data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_static_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_static_data</span>

        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">static_data_cache</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_static_plot_requests</span><span class="p">()[</span>
            <span class="mi">0</span><span class="p">]]</span>

        <span class="n">keys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_static_data</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="p">[]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">}</span>
        <span class="k">for</span> <span class="n">frame</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_static_data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">frame</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_static_data</span></div>


<div class="viewcode-block" id="plot_graph_line.plot">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_graph_line.plot">[docs]</a>
    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">:</span> <span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">,</span> <span class="n">group_number</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>  <span class="n">axis_limits</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">x_lim</span><span class="p">,</span> <span class="n">y_lim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_limits</span><span class="p">(</span><span class="n">axis_limits</span><span class="p">)</span>

        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">()</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">graph_line_color</span><span class="p">(</span>
            <span class="n">group_number</span><span class="o">=</span><span class="n">group_number</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">line_color_settings</span><span class="p">))</span>
        <span class="n">linestyle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">line_linestyle</span><span class="p">(</span>
            <span class="n">group_number</span><span class="o">=</span><span class="n">group_number</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">line_style_settings</span><span class="p">)</span>

        <span class="n">x_parameter</span><span class="p">,</span> <span class="n">y_parameter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span>

        <span class="n">x_values</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">x_parameter</span><span class="p">]</span>
        <span class="n">y_values</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">y_parameter</span><span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tanh&#39;</span><span class="p">:</span>
            <span class="n">x_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tanh</span><span class="p">(</span><span class="n">x_values</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tanh&#39;</span><span class="p">:</span>
            <span class="n">y_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tanh</span><span class="p">(</span><span class="n">y_values</span><span class="p">)</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x_values</span><span class="p">,</span> <span class="n">y_values</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="n">linestyle</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">x_lim</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">*</span><span class="n">x_lim</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">y_lim</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="o">*</span><span class="n">y_lim</span><span class="p">)</span>

        <span class="n">Plot</span><span class="o">.</span><span class="n">tanh_axis_labels</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_x_label</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">Plotter</span><span class="o">.</span><span class="n">_parameter_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="n">x_parameter</span><span class="p">,</span> <span class="n">x_parameter</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_y_label</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">Plotter</span><span class="o">.</span><span class="n">_parameter_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="n">y_parameter</span><span class="p">,</span> <span class="n">y_parameter</span><span class="p">))</span></div>
</div>



<div class="viewcode-block" id="plot_fill_between">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_fill_between">[docs]</a>
<span class="nd">@Plotter</span><span class="o">.</span><span class="n">plot_type</span><span class="p">(</span><span class="s2">&quot;Static: Graph Range&quot;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">plot_fill_between</span><span class="p">(</span><span class="n">Plot</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span><span class="p">,</span> <span class="n">color_scheme</span><span class="p">:</span> <span class="n">ColorScheme</span><span class="p">,</span> <span class="n">parameters</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">functions</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">scale</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">show_x_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">show_y_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                 <span class="n">x_lim</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">y_lim</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">color</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span> <span class="o">=</span> <span class="n">interface</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span> <span class="o">=</span> <span class="n">color_scheme</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">functions</span> <span class="o">=</span> <span class="n">functions</span> <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;Min&#39;</span><span class="p">,</span> <span class="s1">&#39;Max&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">scale</span> <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;Linear&#39;</span><span class="p">,</span> <span class="s1">&#39;Linear&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_x_label</span> <span class="o">=</span> <span class="n">show_x_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_y_label</span> <span class="o">=</span> <span class="n">show_y_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x_lim</span> <span class="o">=</span> <span class="n">x_lim</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_y_lim</span> <span class="o">=</span> <span class="n">y_lim</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_static_data</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">def</span> <span class="nf">line_color_to_line_color_settings</span><span class="p">(</span><span class="n">line_color</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">line_color</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="c1"># check if only &#39;mode&#39; and &#39;settings&#39; in dict</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">key</span> <span class="ow">in</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">}</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">line_color</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s1">&#39;Line color is incorrectly formatted&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">line_color</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">line_color</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Constant Color&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="n">line_color</span><span class="p">}}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Constant Color&#39;</span><span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">line_color_settings</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">line_color_to_line_color_settings</span><span class="p">(</span>
            <span class="n">color</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">line_color_settings</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">method_logger</span><span class="p">[</span><span class="s1">&#39;Graph Line Color&#39;</span><span class="p">][</span><span class="s1">&#39;modes&#39;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Line color is incorrectly formatted: Mode </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">line_color_settings</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> not in known modes </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">method_logger</span><span class="p">[</span><span class="s1">&#39;Graph Line Color&#39;</span><span class="p">][</span><span class="s1">&#39;modes&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="plot_fill_between.get_static_plot_requests">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_fill_between.get_static_plot_requests">[docs]</a>
    <span class="k">def</span> <span class="nf">get_static_plot_requests</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;calculate_function_of_node_values&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;parameters&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">,</span> <span class="s1">&#39;scale&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">,</span> <span class="s1">&#39;function&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="mi">0</span><span class="p">]}},</span>
            <span class="p">{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;calculate_function_of_node_values&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;parameters&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">,</span> <span class="s1">&#39;scale&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">,</span> <span class="s1">&#39;function&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="mi">1</span><span class="p">]}}</span>
        <span class="p">]</span></div>


<div class="viewcode-block" id="plot_fill_between.data">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_fill_between.data">[docs]</a>
    <span class="k">def</span> <span class="nf">data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function_key</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">static_data_cache</span><span class="p">[</span><span class="n">function_key</span><span class="p">]</span>

        <span class="n">keys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

        <span class="n">_static_data</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="p">[]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">}</span>
        <span class="k">for</span> <span class="n">frame</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
                <span class="n">_static_data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">frame</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">_static_data</span></div>


<div class="viewcode-block" id="plot_fill_between.plot">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_fill_between.plot">[docs]</a>
    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">:</span> <span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">,</span> <span class="n">group_number</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>  <span class="n">axis_limits</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">x_lim</span><span class="p">,</span> <span class="n">y_lim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_limits</span><span class="p">(</span><span class="n">axis_limits</span><span class="p">)</span>

        <span class="n">request_min</span><span class="p">,</span> <span class="n">request_max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_static_plot_requests</span><span class="p">()</span>

        <span class="n">data_min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">(</span><span class="n">request_min</span><span class="p">)</span>
        <span class="n">data_max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">(</span><span class="n">request_max</span><span class="p">)</span>

        <span class="n">colors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">graph_line_color</span><span class="p">(</span>
            <span class="n">group_number</span><span class="o">=</span><span class="n">group_number</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">line_color_settings</span><span class="p">))</span>

        <span class="n">x_parameter</span><span class="p">,</span> <span class="n">y_parameter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span>

        <span class="n">x_values</span> <span class="o">=</span> <span class="n">data_min</span><span class="p">[</span><span class="n">x_parameter</span><span class="p">]</span>
        <span class="n">y_values_min</span> <span class="o">=</span> <span class="n">data_min</span><span class="p">[</span><span class="n">y_parameter</span><span class="p">]</span>
        <span class="n">y_values_max</span> <span class="o">=</span> <span class="n">data_max</span><span class="p">[</span><span class="n">y_parameter</span><span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tanh&#39;</span><span class="p">:</span>
            <span class="n">x_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tanh</span><span class="p">(</span><span class="n">x_values</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tanh&#39;</span><span class="p">:</span>
            <span class="n">y_values_min</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tanh</span><span class="p">(</span><span class="n">y_values_min</span><span class="p">)</span>
            <span class="n">y_values_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tanh</span><span class="p">(</span><span class="n">y_values_max</span><span class="p">)</span>

        <span class="c1"># Fill the area between the min and max curves</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">x_values</span><span class="p">,</span> <span class="n">y_values_min</span><span class="p">,</span> <span class="n">y_values_max</span><span class="p">,</span>
                        <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">x_lim</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">*</span><span class="n">x_lim</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">y_lim</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="o">*</span><span class="n">y_lim</span><span class="p">)</span>

        <span class="n">Plot</span><span class="o">.</span><span class="n">tanh_axis_labels</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_x_label</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">Plotter</span><span class="o">.</span><span class="n">_parameter_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="n">x_parameter</span><span class="p">,</span> <span class="n">x_parameter</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_y_label</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">Plotter</span><span class="o">.</span><span class="n">_parameter_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="n">y_parameter</span><span class="p">,</span> <span class="n">y_parameter</span><span class="p">))</span></div>
</div>



<div class="viewcode-block" id="plot_clustering_line">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_clustering_line">[docs]</a>
<span class="nd">@Plotter</span><span class="o">.</span><span class="n">plot_type</span><span class="p">(</span><span class="s2">&quot;Static: Clustering Line&quot;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">plot_clustering_line</span><span class="p">(</span><span class="n">Plot</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span><span class="p">,</span> <span class="n">color_scheme</span><span class="p">:</span> <span class="n">ColorScheme</span><span class="p">,</span> <span class="n">parameter</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">clustering_settings</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
                 <span class="n">scale</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">show_x_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">show_y_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                 <span class="n">x_lim</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">y_lim</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">color</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">linestyle</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">show_legend</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span> <span class="o">=</span> <span class="n">interface</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameter</span> <span class="o">=</span> <span class="n">parameter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;Time&#39;</span><span class="p">,</span> <span class="n">parameter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span> <span class="o">=</span> <span class="n">color_scheme</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clustering_settings</span> <span class="o">=</span> <span class="n">clustering_settings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">scale</span> <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;Linear&#39;</span><span class="p">,</span> <span class="s1">&#39;Linear&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_x_label</span> <span class="o">=</span> <span class="n">show_x_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_y_label</span> <span class="o">=</span> <span class="n">show_y_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x_lim</span> <span class="o">=</span> <span class="n">x_lim</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_y_lim</span> <span class="o">=</span> <span class="n">y_lim</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_legend</span> <span class="o">=</span> <span class="n">show_legend</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_static_data</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">def</span> <span class="nf">line_color_to_line_color_settings</span><span class="p">(</span><span class="n">line_color</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">line_color</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="c1"># check if only &#39;mode&#39; and &#39;settings&#39; in dict</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">key</span> <span class="ow">in</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">}</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">line_color</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s1">&#39;Line color is incorrectly formatted&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">line_color</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">line_color</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Constant Color&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="n">line_color</span><span class="p">}}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Constant Color&#39;</span><span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">line_color_settings</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">line_color_to_line_color_settings</span><span class="p">(</span>
            <span class="n">color</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">line_color_settings</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">method_logger</span><span class="p">[</span><span class="s1">&#39;Cluster Line Color&#39;</span><span class="p">][</span><span class="s1">&#39;modes&#39;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Line color is incorrectly formatted: Mode </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">line_color_settings</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> not in known modes </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">method_logger</span><span class="p">[</span><span class="s1">&#39;Cluster Line Color&#39;</span><span class="p">][</span><span class="s1">&#39;modes&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">line_style_to_line_style_settings</span><span class="p">(</span><span class="n">line_style</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">line_style</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="c1"># check if only &#39;mode&#39; and &#39;settings&#39; in dict</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">key</span> <span class="ow">in</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">}</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">line_style</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s1">&#39;Line style is incorrectly formatted&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">line_style</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">line_style</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Constant Style&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;style&#39;</span><span class="p">:</span> <span class="n">line_style</span><span class="p">}}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Constant Style&#39;</span><span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">line_style_settings</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">line_style_to_line_style_settings</span><span class="p">(</span>
            <span class="n">linestyle</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">line_style_settings</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">method_logger</span><span class="p">[</span><span class="s1">&#39;Line Style&#39;</span><span class="p">][</span><span class="s1">&#39;modes&#39;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Line style is incorrectly formatted: Mode </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">line_style_settings</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> not in known modes </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">method_logger</span><span class="p">[</span><span class="s1">&#39;Line Style&#39;</span><span class="p">][</span><span class="s1">&#39;modes&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="plot_clustering_line.get_track_clusterings_requests">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_clustering_line.get_track_clusterings_requests">[docs]</a>
    <span class="k">def</span> <span class="nf">get_track_clusterings_requests</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">clustering_settings</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">requires_tracking</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">line_color_settings</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">requires_tracking</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">line_style_settings</span><span class="p">)]</span></div>


<div class="viewcode-block" id="plot_clustering_line.get_static_plot_requests">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_clustering_line.get_static_plot_requests">[docs]</a>
    <span class="k">def</span> <span class="nf">get_static_plot_requests</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;clustering_graph_values&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;parameters&#39;</span><span class="p">:</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parameter</span><span class="p">,</span> <span class="s1">&#39;Label&#39;</span><span class="p">,</span> <span class="s1">&#39;Time&#39;</span><span class="p">),</span> <span class="s1">&#39;scale&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">,</span> <span class="s1">&#39;clustering_settings&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">clustering_settings</span><span class="p">}}]</span></div>


<div class="viewcode-block" id="plot_clustering_line.data">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_clustering_line.data">[docs]</a>
    <span class="k">def</span> <span class="nf">data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_static_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_static_data</span>

        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">static_data_cache</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_static_plot_requests</span><span class="p">()[</span>
            <span class="mi">0</span><span class="p">]]</span>

        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform_data</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">transform_parameter</span><span class="o">=</span><span class="s1">&#39;Label&#39;</span><span class="p">)</span>

        <span class="n">x_parameter</span><span class="p">,</span> <span class="n">y_parameter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span>

        <span class="c1"># Transform data to suitable format for plotting</span>
        <span class="n">x_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">x_parameter</span><span class="p">])</span>
        <span class="n">y_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">y_parameter</span><span class="p">])</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tanh&#39;</span><span class="p">:</span>
            <span class="n">x_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tanh</span><span class="p">(</span><span class="n">x_values</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tanh&#39;</span><span class="p">:</span>
            <span class="n">y_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tanh</span><span class="p">(</span><span class="n">y_values</span><span class="p">)</span>

        <span class="n">labels</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Label&#39;</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_static_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">x_values</span><span class="p">,</span>
                             <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="n">y_values</span><span class="p">),</span> <span class="s1">&#39;labels&#39;</span><span class="p">:</span> <span class="n">labels</span><span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_static_data</span></div>


<div class="viewcode-block" id="plot_clustering_line.plot">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_clustering_line.plot">[docs]</a>
    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">:</span> <span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">,</span> <span class="n">group_number</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>  <span class="n">axis_limits</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">x_lim</span><span class="p">,</span> <span class="n">y_lim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_limits</span><span class="p">(</span><span class="n">axis_limits</span><span class="p">)</span>

        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">()</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;labels&#39;</span><span class="p">]</span>

        <span class="n">linestyle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">line_linestyle</span><span class="p">(</span>
            <span class="n">clusters</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span> <span class="n">group_number</span><span class="o">=</span><span class="n">group_number</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">line_style_settings</span><span class="p">)</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">cluster_line_colors</span><span class="p">(</span>
            <span class="n">clusters</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span> <span class="n">group_number</span><span class="o">=</span><span class="n">group_number</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">line_color_settings</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">Plot</span><span class="o">.</span><span class="n">is_single_color</span><span class="p">(</span><span class="n">colors</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">values</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">],</span> <span class="n">labels</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_legend</span><span class="p">:</span>
                    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
                            <span class="n">linestyle</span><span class="o">=</span><span class="n">linestyle</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span>
                            <span class="n">linestyle</span><span class="o">=</span><span class="n">linestyle</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">values</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">],</span> <span class="n">labels</span><span class="p">,</span> <span class="n">colors</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_legend</span><span class="p">:</span>
                    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
                            <span class="n">linestyle</span><span class="o">=</span><span class="n">linestyle</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span>
                            <span class="n">linestyle</span><span class="o">=</span><span class="n">linestyle</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">x_lim</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">*</span><span class="n">x_lim</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">y_lim</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="o">*</span><span class="n">y_lim</span><span class="p">)</span>

        <span class="n">Plot</span><span class="o">.</span><span class="n">tanh_axis_labels</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_x_label</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">Plotter</span><span class="o">.</span><span class="n">_parameter_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_y_label</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">Plotter</span><span class="o">.</span><span class="n">_parameter_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_legend</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span></div>
</div>



<div class="viewcode-block" id="plot_fill_between_clustering">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_fill_between_clustering">[docs]</a>
<span class="nd">@Plotter</span><span class="o">.</span><span class="n">plot_type</span><span class="p">(</span><span class="s2">&quot;Static: Clustering Range&quot;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">plot_fill_between_clustering</span><span class="p">(</span><span class="n">Plot</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span><span class="p">,</span> <span class="n">color_scheme</span><span class="p">:</span> <span class="n">ColorScheme</span><span class="p">,</span> <span class="n">parameter</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">range_parameter</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">clustering_settings</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{},</span>
                 <span class="n">scale</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">show_x_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">show_y_label</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                 <span class="n">x_lim</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">y_lim</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">color</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">show_legend</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">alpha</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.3</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="p">:</span> <span class="n">Interface</span> <span class="o">=</span> <span class="n">interface</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameter</span> <span class="o">=</span> <span class="n">parameter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;Time&#39;</span><span class="p">,</span> <span class="s1">&#39;Parameter&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span> <span class="o">=</span> <span class="n">color_scheme</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">range_parameter</span> <span class="o">=</span> <span class="n">range_parameter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clustering_settings</span> <span class="o">=</span> <span class="n">clustering_settings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">scale</span> <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;Linear&#39;</span><span class="p">,</span> <span class="s1">&#39;Linear&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_x_label</span> <span class="o">=</span> <span class="n">show_x_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_y_label</span> <span class="o">=</span> <span class="n">show_y_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_x_lim</span> <span class="o">=</span> <span class="n">x_lim</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_y_lim</span> <span class="o">=</span> <span class="n">y_lim</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_legend</span> <span class="o">=</span> <span class="n">show_legend</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="n">alpha</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_static_data</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">def</span> <span class="nf">line_color_to_line_color_settings</span><span class="p">(</span><span class="n">line_color</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">line_color</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="c1"># check if only &#39;mode&#39; and &#39;settings&#39; in dict</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">key</span> <span class="ow">in</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">}</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">line_color</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s1">&#39;Line color is incorrectly formatted&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">line_color</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">line_color</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Constant Color&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;color&#39;</span><span class="p">:</span> <span class="n">line_color</span><span class="p">}}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;Constant Color&#39;</span><span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">line_color_settings</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">line_color_to_line_color_settings</span><span class="p">(</span>
            <span class="n">color</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">line_color_settings</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">method_logger</span><span class="p">[</span><span class="s1">&#39;Cluster Line Color&#39;</span><span class="p">][</span><span class="s1">&#39;modes&#39;</span><span class="p">]:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Line color is incorrectly formatted: Mode </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">line_color_settings</span><span class="p">[</span><span class="s1">&#39;mode&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> not in known modes </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">method_logger</span><span class="p">[</span><span class="s1">&#39;Cluster Line Color&#39;</span><span class="p">][</span><span class="s1">&#39;modes&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="plot_fill_between_clustering.get_track_clusterings_requests">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_fill_between_clustering.get_track_clusterings_requests">[docs]</a>
    <span class="k">def</span> <span class="nf">get_track_clusterings_requests</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">clustering_settings</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">requires_tracking</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">line_color_settings</span><span class="p">)]</span></div>


<div class="viewcode-block" id="plot_fill_between_clustering.get_static_plot_requests">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_fill_between_clustering.get_static_plot_requests">[docs]</a>
    <span class="k">def</span> <span class="nf">get_static_plot_requests</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[{</span><span class="s1">&#39;method&#39;</span><span class="p">:</span> <span class="s1">&#39;clustering_graph_values&#39;</span><span class="p">,</span> <span class="s1">&#39;settings&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;parameters&#39;</span><span class="p">:</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parameter</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">range_parameter</span><span class="p">,</span> <span class="s1">&#39;Label&#39;</span><span class="p">,</span> <span class="s1">&#39;Time&#39;</span><span class="p">),</span> <span class="s1">&#39;scale&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">,</span> <span class="s1">&#39;clustering_settings&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">clustering_settings</span><span class="p">}}]</span></div>


<div class="viewcode-block" id="plot_fill_between_clustering.data">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_fill_between_clustering.data">[docs]</a>
    <span class="k">def</span> <span class="nf">data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_static_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_static_data</span>

        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">static_data_cache</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_static_plot_requests</span><span class="p">()[</span>
            <span class="mi">0</span><span class="p">]]</span>

        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transform_data</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">transform_parameter</span><span class="o">=</span><span class="s1">&#39;Label&#39;</span><span class="p">)</span>

        <span class="c1"># Transform data to suitable format for plotting</span>
        <span class="n">x_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Time&#39;</span><span class="p">])</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">parameter</span><span class="p">])</span>

        <span class="n">labels</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Label&#39;</span><span class="p">]</span>

        <span class="n">value_delta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">range_parameter</span><span class="p">])</span>
        <span class="n">min_value</span> <span class="o">=</span> <span class="n">value</span><span class="o">-</span><span class="n">value_delta</span>
        <span class="n">max_value</span> <span class="o">=</span> <span class="n">value</span><span class="o">+</span><span class="n">value_delta</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tanh&#39;</span><span class="p">:</span>
            <span class="n">min_value</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tanh</span><span class="p">(</span><span class="n">min_value</span><span class="p">)</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tanh</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="n">max_value</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tanh</span><span class="p">(</span><span class="n">max_value</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_static_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">x_values</span><span class="p">,</span>
                             <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="n">value</span><span class="p">),</span> <span class="s1">&#39;y_min&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="n">min_value</span><span class="p">),</span> <span class="s1">&#39;y_max&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="n">max_value</span><span class="p">),</span> <span class="s1">&#39;labels&#39;</span><span class="p">:</span> <span class="n">labels</span><span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_static_data</span></div>


<div class="viewcode-block" id="plot_fill_between_clustering.plot">
<a class="viewcode-back" href="../../source/hari_plotter.plot.html#hari_plotter.plot.plot_fill_between_clustering.plot">[docs]</a>
    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ax</span><span class="p">:</span> <span class="n">plt</span><span class="o">.</span><span class="n">Axes</span><span class="p">,</span> <span class="n">group_number</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>  <span class="n">axis_limits</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">x_lim</span><span class="p">,</span> <span class="n">y_lim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_limits</span><span class="p">(</span><span class="n">axis_limits</span><span class="p">)</span>

        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">()</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;labels&#39;</span><span class="p">]</span>

        <span class="n">colors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">color_scheme</span><span class="o">.</span><span class="n">cluster_line_colors</span><span class="p">(</span>
            <span class="n">clusters</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span> <span class="n">group_number</span><span class="o">=</span><span class="n">group_number</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">line_color_settings</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">Plot</span><span class="o">.</span><span class="n">is_single_color</span><span class="p">(</span><span class="n">colors</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">values</span><span class="p">,</span> <span class="n">values_min</span><span class="p">,</span> <span class="n">values_max</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;y_min&#39;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;y_max&#39;</span><span class="p">],</span> <span class="n">labels</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_legend</span><span class="p">:</span>
                    <span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">values_min</span><span class="p">,</span> <span class="n">values_max</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">alpha</span><span class="p">,</span>
                                    <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">values_min</span><span class="p">,</span> <span class="n">values_max</span><span class="p">,</span>
                                    <span class="n">alpha</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">alpha</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">values</span><span class="p">,</span> <span class="n">values_min</span><span class="p">,</span> <span class="n">values_max</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;y_min&#39;</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;y_max&#39;</span><span class="p">],</span> <span class="n">labels</span><span class="p">,</span> <span class="n">colors</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_legend</span><span class="p">:</span>
                    <span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">values_min</span><span class="p">,</span> <span class="n">values_max</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">alpha</span><span class="p">,</span>
                                    <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">values_min</span><span class="p">,</span> <span class="n">values_max</span><span class="p">,</span>
                                    <span class="n">alpha</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">alpha</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">x_lim</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">*</span><span class="n">x_lim</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">y_lim</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="o">*</span><span class="n">y_lim</span><span class="p">)</span>

        <span class="n">Plot</span><span class="o">.</span><span class="n">tanh_axis_labels</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_x_label</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">Plotter</span><span class="o">.</span><span class="n">_parameter_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_y_label</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">Plotter</span><span class="o">.</span><span class="n">_parameter_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameters</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">show_legend</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span></div>
</div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Amrita Goswami, Rohit Goswami, Moritz Sallermann, Ivan Tambovtsev.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>